–Ω–∞ –æ—Å–Ω–æ–≤–µ https://github.com/open-webui/open-webui.git  —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–π (—Ü–µ–ª–∏–∫–æ–º –Ω–∞–ø–∏—à–∏ –≤–µ—Å—å –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞) –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã,
–≤ –º–æ–µ–º –ø–æ–Ω–∏–º–∞–Ω–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–æ–µ –æ–∫–Ω–æ, –≥–¥–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å–∞–º–∞ –¥–∏–∞–≥—Ä–∞–º–º–∞, —Å–Ω–∏–∑—É –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–Ω–æ–ø–∫–∞ "—Å–æ–∑–¥–∞—Ç—å", –∞ —Å–ø—Ä–∞–≤–∞ –æ–∫–æ—à–∫–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º—ã
—Ç–≤–æ—è –∑–∞–¥–∞—á–∞ –ø—Ä–∏–¥—É–º–∞—Ç—å –∫–∞–∫ —ç—Ç–æ –ª—É—á—à–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å. –î–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: –ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤–≤–æ–¥ FR/NFR (–î–õ–Ø –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ü–û), –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ ML-—è–¥—Ä–µ, –∑–∞—Ç–µ–º —Å—Ç—Ä–æ–∏—Ç—Å—è –¥–∏–∞–≥—Ä–∞–º–º–∞ C4 –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–∞–ª–µ–µ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è —á—Ç–æ –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã –±—É–¥–µ—Ç —É—á–∞–≤—Å—Ç–≤–æ–≤–∞—Ç—å –ò–ò –∞—Å–∏—Å—Ç–µ–Ω—Ç (—Å—Ü–µ–Ω–∞—Ä–∏–π, –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —è—á–µ–π–∫–∞ –Ω–∞ 1 —É—Ä–æ–≤–Ω–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ò–ò, —Ç–∞–∫ –∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã –Ω–∞ –Ω–∏–∂–Ω–∏—Ö —É—Ä–æ–≤–Ω—è—Ö, —Ç–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã). –∑–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å –≤–æ–∑—å–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Å—Ç–∏–ª—å github, notion, miro, figma. –£—á—Ç–∏ —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ –±—ã—Å—Ç—Ä–æ, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–æ, —Ç–∞–∫ —á—Ç–æ –±—ã –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–∏—à–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —á–∞—Å—Ç—å. –∏–º–µ–µ—Ç—Å—è vscode –∏ windows 11 (–≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–∏–º–∏–Ω–∞–ª–µ –ø–∏—à–∏ –¥–ª—è win). –Ω–∞—á–Ω–∏ —Å 1 —ç—Ç–∞–ø–∞, —Å—Ç–µ–∫, –∑–∞–ø—É—Å–∫, –∏ —Ä–∞—Å–ø–∏—à–∏ —Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã. –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ, —Ç.–∫. —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –¥–∏–ø–ª–æ–º–∞, –≤—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∞—Å–∏–≤–æ, –∑—Ä–µ–ª–∏—â–Ω–æ, –∫–Ω–æ–ø–∫–∏, –∞–Ω–∏–º–∞—Ü–∏–∏, –ø–µ—Ä–µ—Ö–æ–¥—ã, –æ–∫–Ω–∞ –∏ –ø—Ä–æ—á–µ–µ.  –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É MVP –µ—Å—Ç—å –≤—Å–µ–≥–æ –ø–∞—Ä—É —á–∞—Å–æ–≤, –ø–æ—Ç–æ–º—É –¥–∞–≤–∞–π –Ω–∞—á–Ω–µ–º –≤ —É—Å–∫–æ—Ä–µ–Ω–Ω–æ–º —Ç–µ–º–ø–µ, (–∑–∞–º–µ—á–∞–Ω–∏–µ –∫—É—Å–∫–∏ –∫–æ–¥–∞ –æ–±–æ–∑–Ω–∞—á–∞—Ç—å –∫—É–¥–∞ –∏—Ö –≤—Å—Ç–∞–≤–ª—è—Ç—å), –Ω–∞—á–Ω–µ–º —Å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø–∏—à–∏ bash –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è) –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ. –ß–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞ --—Å tailwindcss –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∏–∑–±–µ–∂–∞—Ç—å –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è. –ò–º–µ–µ—Ç—Ç—Å—è –¥–≤–µ –æ–±—É—á–µ–Ω–Ω—ã–µ ML-–º–æ–¥–µ–ª–∏. –ü–∏—à–∏ –∫–æ–¥, —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —á—Ç–æ —Å –Ω–∏–º –¥–µ–ª–∞—Ç—å –∏ –∫—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å, –≤–µ–¥–∏ —Å–≤—è–∑—å-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
–í–æ—Ç –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç MVP –¥–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã —Å –∫—Ä–∞—Å–∏–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º. –ù–∞—á–Ω–µ–º —Å —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
bash
# –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–µ–∫—Ç
npm create vite@latest open-webui -- --template react-ts
cd open-webui

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
npm install @mui/material @emotion/react @emotion/styled
npm install reactflow
npm install @monaco-editor/react
npm install framer-motion
2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ DiagramEditor/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DiagramEditor.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DiagramEditor.css
‚îÇ   ‚îú‚îÄ‚îÄ InputPanel/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InputPanel.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ InputPanel.css
‚îÇ   ‚îú‚îÄ‚îÄ CodePanel/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CodePanel.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CodePanel.css
‚îÇ   ‚îî‚îÄ‚îÄ AIAssistant/
‚îÇ       ‚îî‚îÄ‚îÄ AIAssistant.tsx
‚îú‚îÄ‚îÄ App.tsx
‚îú‚îÄ‚îÄ main.tsx
‚îú‚îÄ‚îÄ index.css
‚îî‚îÄ‚îÄ assets/
    ‚îî‚îÄ‚îÄ styles/
        ‚îî‚îÄ‚îÄ global.css
3. –ö–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
src/main.tsx (–æ–±–Ω–æ–≤–ª—è–µ–º):

tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'
import { ThemeProvider, createTheme } from '@mui/material'
import CssBaseline from '@mui/material/CssBaseline'

const darkTheme = createTheme({
  palette: {
    mode: 'dark',
    primary: {
      main: '#1976d2',
    },
    background: {
      default: '#121212',
      paper: '#1e1e1e',
    },
  },
  typography: {
    fontFamily: "'Inter', sans-serif",
  },
})

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <ThemeProvider theme={darkTheme}>
      <CssBaseline />
      <App />
    </ThemeProvider>
  </React.StrictMode>
)
src/App.tsx:

tsx
import React, { useState } from 'react'
import DiagramEditor from './components/DiagramEditor/DiagramEditor'
import InputPanel from './components/InputPanel/InputPanel'
import CodePanel from './components/CodePanel/CodePanel'
import AIAssistant from './components/AIAssistant/AIAssistant'
import { Box, Grid, Paper, Typography } from '@mui/material'
import { motion } from 'framer-motion'

const App: React.FC = () => {
  const [diagramData, setDiagramData] = useState<any>(null)
  const [generatedCode, setGeneratedCode] = useState<string>('')
  const [isProcessing, setIsProcessing] = useState<boolean>(false)

  const handleCreateDiagram = (requirements: string) => {
    setIsProcessing(true)
    
    // –≠–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã ML-—è–¥—Ä–∞
    setTimeout(() => {
      const mockDiagram = {
        nodes: [
          { id: '1', position: { x: 100, y: 100 }, data: { label: 'Client App' } },
          { id: '2', position: { x: 400, y: 100 }, data: { label: 'API Server' } },
          { id: '3', position: { x: 400, y: 300 }, data: { label: 'Database' } },
        ],
        edges: [
          { id: 'e1-2', source: '1', target: '2', label: 'HTTP Requests' },
          { id: 'e2-3', source: '2', target: '3', label: 'SQL Queries' },
        ]
      }
      
      const mockCode = `// C4 Diagram Code
System(clientApp, "Client Application", "React-based UI")
System(apiServer, "API Server", "Node.js with Express")
System(db, "Database", "PostgreSQL")

Rel(clientApp, apiServer, "HTTP Requests", "JSON/HTTPS")
Rel(apiServer, db, "SQL Queries", "TCP")`
      
      setDiagramData(mockDiagram)
      setGeneratedCode(mockCode)
      setIsProcessing(false)
    }, 2000)
  }

  return (
    <Box sx={{ height: '100vh', display: 'flex', flexDirection: 'column', bgcolor: 'background.default' }}>
      <Box sx={{ p: 2, borderBottom: '1px solid', borderColor: 'divider' }}>
        <Typography variant="h4" component="h1" sx={{ fontWeight: 'bold' }}>
          C4 Model Architect
        </Typography>
      </Box>
      
      <Grid container sx={{ flex: 1, overflow: 'hidden' }}>
        <Grid item xs={8} sx={{ height: '100%' }}>
          <Paper sx={{ height: '100%', borderRadius: 2, m: 1, overflow: 'hidden', position: 'relative' }}>
            <DiagramEditor data={diagramData} />
          </Paper>
        </Grid>
        
        <Grid item xs={4} sx={{ display: 'flex', flexDirection: 'column', height: '100%' }}>
          <Paper sx={{ flex: 1, borderRadius: 2, m: 1, overflow: 'hidden' }}>
            <CodePanel code={generatedCode} />
          </Paper>
          
          <Paper sx={{ borderRadius: 2, m: 1, overflow: 'hidden' }}>
            <AIAssistant />
          </Paper>
        </Grid>
      </Grid>
      
      <motion.div
        initial={{ y: 100 }}
        animate={{ y: 0 }}
        transition={{ type: 'spring', damping: 25 }}
      >
        <InputPanel onCreate={handleCreateDiagram} isLoading={isProcessing} />
      </motion.div>
    </Box>
  )
}

export default App
src/components/DiagramEditor/DiagramEditor.tsx:

tsx
import React, { useCallback } from 'react'
import ReactFlow, { 
  Controls, 
  Background, 
  MiniMap,
  Node,
  Edge,
  NodeTypes,
  ReactFlowProvider
} from 'reactflow'
import 'reactflow/dist/style.css'
import './DiagramEditor.css'
import { motion } from 'framer-motion'
import CustomNode from './CustomNode'

const nodeTypes: NodeTypes = {
  custom: CustomNode,
}

const DiagramEditor: React.FC<{ data: any }> = ({ data }) => {
  const onNodeClick = useCallback((_: React.MouseEvent, node: Node) => {
    console.log('Node clicked:', node)
  }, [])

  if (!data) {
    return (
      <div className="diagram-placeholder">
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          className="placeholder-content"
        >
          <div className="animation-container">
            <div className="circle circle-1"></div>
            <div className="circle circle-2"></div>
            <div className="circle circle-3"></div>
          </div>
          <h3>Enter requirements to generate C4 diagram</h3>
          <p>Start by describing your system in the input panel below</p>
        </motion.div>
      </div>
    )
  }

  return (
    <ReactFlowProvider>
      <ReactFlow
        nodes={data.nodes}
        edges={data.edges}
        onNodeClick={onNodeClick}
        nodeTypes={nodeTypes}
        fitView
      >
        <Background color="#5f5f5f" gap={16} />
        <Controls />
        <MiniMap />
      </ReactFlow>
    </ReactFlowProvider>
  )
}

export default DiagramEditor
src/components/DiagramEditor/CustomNode.tsx:

tsx
import React from 'react'
import { Handle, Position, NodeProps } from 'reactflow'
import { motion } from 'framer-motion'

const CustomNode: React.FC<NodeProps> = ({ data }) => {
  return (
    <motion.div 
      className="custom-node"
      initial={{ scale: 0.8, opacity: 0 }}
      animate={{ scale: 1, opacity: 1 }}
      transition={{ duration: 0.3 }}
      whileHover={{ boxShadow: '0 0 15px rgba(25, 118, 210, 0.5)' }}
    >
      <div className="node-header">
        <div className="node-icon">üì±</div>
        <div className="node-title">{data.label}</div>
      </div>
      <div className="node-body">
        <div className="node-info">Type: System Component</div>
        <div className="node-status">Status: Active</div>
      </div>
      <Handle type="source" position={Position.Right} />
      <Handle type="target" position={Position.Left} />
    </motion.div>
  )
}

export default CustomNode
src/components/DiagramEditor/DiagramEditor.css:

css
.diagram-placeholder {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  background: #1e1e1e;
  color: #a0a0a0;
}

.placeholder-content {
  text-align: center;
  max-width: 500px;
}

.animation-container {
  position: relative;
  height: 120px;
  margin-bottom: 30px;
}

.circle {
  position: absolute;
  border-radius: 50%;
  background: linear-gradient(145deg, #1976d2, #5e9ce0);
  opacity: 0.7;
}

.circle-1 {
  width: 80px;
  height: 80px;
  top: 20px;
  left: calc(50% - 40px);
  animation: pulse 3s infinite ease-in-out;
}

.circle-2 {
  width: 60px;
  height: 60px;
  top: 30px;
  left: calc(50% - 70px);
  animation: pulse 3s infinite 0.5s ease-in-out;
}

.circle-3 {
  width: 60px;
  height: 60px;
  top: 30px;
  left: calc(50% + 10px);
  animation: pulse 3s infinite 1s ease-in-out;
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 0.7; }
  50% { transform: scale(1.1); opacity: 0.4; }
  100% { transform: scale(1); opacity: 0.7; }
}

.custom-node {
  background: #252526;
  border: 1px solid #3a3a3a;
  border-radius: 8px;
  padding: 15px;
  width: 250px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  transition: box-shadow 0.3s ease;
}

.node-header {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #3a3a3a;
  padding-bottom: 10px;
  margin-bottom: 10px;
}

.node-icon {
  font-size: 24px;
  margin-right: 10px;
}

.node-title {
  font-weight: bold;
  font-size: 16px;
  color: #e0e0e0;
}

.node-body {
  font-size: 14px;
}

.node-info {
  color: #a0a0a0;
  margin-bottom: 5px;
}

.node-status {
  color: #4caf50;
  font-weight: 500;
}
src/components/InputPanel/InputPanel.tsx:

tsx
import React, { useState } from 'react'
import { 
  TextField, 
  Button, 
  Box, 
  CircularProgress,
  Typography,
  IconButton
} from '@mui/material'
import SendIcon from '@mui/icons-material/Send'
import './InputPanel.css'
import { motion } from 'framer-motion'

interface InputPanelProps {
  onCreate: (requirements: string) => void
  isLoading: boolean
}

const InputPanel: React.FC<InputPanelProps> = ({ onCreate, isLoading }) => {
  const [requirements, setRequirements] = useState('')
  const [isFocused, setIsFocused] = useState(false)

  const handleSubmit = () => {
    if (requirements.trim() && !isLoading) {
      onCreate(requirements)
    }
  }

  return (
    <Box className={`input-panel ${isFocused ? 'focused' : ''}`}>
      <TextField
        fullWidth
        multiline
        minRows={2}
        maxRows={6}
        variant="outlined"
        placeholder="Enter FR/NFR requirements for client-server system..."
        value={requirements}
        onChange={(e) => setRequirements(e.target.value)}
        onFocus={() => setIsFocused(true)}
        onBlur={() => setIsFocused(false)}
        disabled={isLoading}
        InputProps={{
          endAdornment: (
            <motion.div
              whileHover={{ scale: 1.05 }}
              whileTap={{ scale: 0.95 }}
            >
              <IconButton
                color="primary"
                onClick={handleSubmit}
                disabled={isLoading || !requirements.trim()}
              >
                {isLoading ? (
                  <CircularProgress size={24} color="inherit" />
                ) : (
                  <SendIcon />
                )}
              </IconButton>
            </motion.div>
          ),
          sx: {
            color: 'white',
            backgroundColor: '#252526',
            borderRadius: '12px',
            padding: '10px 15px',
          }
        }}
      />
      
      <Box className="examples-container">
        <Typography variant="caption" color="textSecondary" sx={{ mr: 1 }}>
          Try:
        </Typography>
        <Button 
          variant="outlined" 
          size="small"
          onClick={() => setRequirements('User authentication with JWT tokens')}
        >
          Auth Example
        </Button>
        <Button 
          variant="outlined" 
          size="small"
          sx={{ ml: 1 }}
          onClick={() => setRequirements('Payment processing with Stripe API')}
        >
          Payment Example
        </Button>
      </Box>
    </Box>
  )
}

export default InputPanel
src/components/InputPanel/InputPanel.css:

css
.input-panel {
  padding: 16px;
  background: #1e1e1e;
  border-top: 1px solid #333;
  transition: all 0.3s ease;
}

.input-panel.focused {
  background: #252526;
  box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.3);
}

.examples-container {
  display: flex;
  align-items: center;
  margin-top: 10px;
  opacity: 0.7;
  transition: opacity 0.3s ease;
}

.input-panel:hover .examples-container {
  opacity: 1;
}
src/components/CodePanel/CodePanel.tsx:

tsx
import React from 'react'
import Editor from '@monaco-editor/react'
import { Box, Typography } from '@mui/material'
import './CodePanel.css'
import { motion } from 'framer-motion'

interface CodePanelProps {
  code: string
}

const CodePanel: React.FC<CodePanelProps> = ({ code }) => {
  return (
    <Box className="code-panel">
      <Typography variant="h6" sx={{ p: 2, borderBottom: '1px solid #333' }}>
        Generated Diagram Code
      </Typography>
      
      <motion.div 
        className="editor-container"
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 0.5 }}
      >
        <Editor
          height="100%"
          language="c4"
          value={code}
          theme="vs-dark"
          options={{
            readOnly: true,
            minimap: { enabled: true },
            fontSize: 14,
            scrollBeyondLastLine: false,
            automaticLayout: true,
          }}
        />
      </motion.div>
    </Box>
  )
}

export default CodePanel
src/components/CodePanel/CodePanel.css:

css
.code-panel {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.editor-container {
  flex: 1;
  overflow: hidden;
}
src/components/AIAssistant/AIAssistant.tsx:

tsx
import React, { useState } from 'react'
import { 
  Box, 
  Typography, 
  TextField, 
  IconButton, 
  List, 
  ListItem, 
  ListItemText,
  Avatar,
  Paper
} from '@mui/material'
import SendIcon from '@mui/icons-material/Send'
import SmartToyIcon from '@mui/icons-material/SmartToy'
import { motion, AnimatePresence } from 'framer-motion'

const AIAssistant: React.FC = () => {
  const [messages, setMessages] = useState<{ text: string; isUser: boolean }[]>([
    { text: "Hello! I'm your AI assistant. How can I help with your diagram?", isUser: false }
  ])
  const [input, setInput] = useState('')

  const handleSend = () => {
    if (input.trim()) {
      // Add user message
      setMessages([...messages, { text: input, isUser: true }])
      setInput('')
      
      // Simulate AI response
      setTimeout(() => {
        setMessages(prev => [
          ...prev, 
          { 
            text: "I've updated the diagram based on your request. The authentication flow now includes JWT tokens and refresh tokens.", 
            isUser: false 
          }
        ])
      }, 1500)
    }
  }

  return (
    <Box className="ai-assistant">
      <Typography variant="h6" sx={{ p: 2, borderBottom: '1px solid #333' }}>
        AI Assistant
      </Typography>
      
      <Box className="chat-container">
        <List sx={{ p: 1, height: '200px', overflowY: 'auto' }}>
          <AnimatePresence>
            {messages.map((msg, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                exit={{ opacity: 0 }}
                transition={{ duration: 0.3 }}
              >
                <ListItem sx={{ 
                  justifyContent: msg.isUser ? 'flex-end' : 'flex-start',
                  alignItems: 'flex-start',
                  mb: 1
                }}>
                  {!msg.isUser && (
                    <Avatar sx={{ bgcolor: 'primary.main', mr: 1 }}>
                      <SmartToyIcon />
                    </Avatar>
                  )}
                  <Paper sx={{ 
                    p: 1.5, 
                    maxWidth: '70%',
                    bgcolor: msg.isUser ? 'primary.dark' : 'grey.800',
                    borderRadius: msg.isUser 
                      ? '18px 18px 0 18px' 
                      : '18px 18px 18px 0'
                  }}>
                    <ListItemText 
                      primary={msg.text} 
                      sx={{ color: 'white' }} 
                    />
                  </Paper>
                </ListItem>
              </motion.div>
            ))}
          </AnimatePresence>
        </List>
        
        <Box sx={{ display: 'flex', p: 1, borderTop: '1px solid #333' }}>
          <TextField
            fullWidth
            variant="outlined"
            placeholder="Ask AI to modify the diagram..."
            value={input}
            onChange={(e) => setInput(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && handleSend()}
            size="small"
            sx={{ 
              backgroundColor: '#252526',
              borderRadius: '20px',
              '& .MuiOutlinedInput-root': {
                borderRadius: '20px',
                paddingRight: '12px'
              }
            }}
            InputProps={{
              endAdornment: (
                <IconButton 
                  onClick={handleSend}
                  disabled={!input.trim()}
                  size="small"
                  sx={{ color: 'primary.main' }}
                >
                  <SendIcon />
                </IconButton>
              )
            }}
          />
        </Box>
      </Box>
    </Box>
  )
}

export default AIAssistant
src/index.css:

css
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #121212;
  color: #e0e0e0;
  height: 100vh;
  overflow: hidden;
}

#root {
  height: 100%;
}

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #1e1e1e;
}

::-webkit-scrollbar-thumb {
  background: #444;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}
4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
bash
npm run dev
5. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å MVP
–í–≤–æ–¥ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç FR/NFR –≤ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã: ML-—è–¥—Ä–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–ø–æ–∫–∞ —ç–º—É–ª—è—Ü–∏—è)

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è: –î–∏–∞–≥—Ä–∞–º–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ–∫–Ω–µ –∫–∞–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥—Ä–∞—Ñ

–ö–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º—ã: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∞

AI Assistant: –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å–Ω–∏–∑—É –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ò–ò

6. –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ML-–º–æ–¥–µ–ª—è–º–∏:

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Python-–±–µ–∫–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ REST API

–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞: { "requirements": "—Ç–µ–∫—Å—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π" }

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: { "diagram": {...}, "code": "—Å—Ç—Ä–æ–∫–∞" }

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã:

Drag-n-drop —ç–ª–µ–º–µ–Ω—Ç–æ–≤

–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–ª—è —É–∑–ª–æ–≤

–°–≤—è–∑—ã–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:

–†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GPT/LLM

–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤: "–î–æ–±–∞–≤—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏"

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã

–≠–∫—Å–ø–æ—Ä—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:

–≠–∫—Å–ø–æ—Ä—Ç –≤ PNG/SVG

–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–ê–Ω–∏–º–∞—Ü–∏–∏ –∏ UX-—É–ª—É—á—à–µ–Ω–∏—è:

–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

7. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (Windows)
powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è production
npm run build
–≠—Ç–æ—Ç MVP —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏, –ø–ª–∞–≤–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º –≤ —Å—Ç–∏–ª–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ö–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ª–µ–≥–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å ML-—è–¥—Ä–æ–º –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

E:\–°ode\C4Designer\open-webui>npm run dev

> open-webui@0.0.0 dev
> vite


  VITE v7.0.0  ready in 193 ms

  ‚ûú  Local:   http://localhost:5173/
  ‚ûú  Network: use --host to expose
  ‚ûú  press h + enter to show help
02:40:51 [vite] Internal server error: Failed to resolve import "@mui/icons-material/Send" from "src/components/InputPanel/InputPanel.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: E:/–°ode/C4Designer/open-webui/src/components/InputPanel/InputPanel.tsx:10:21
  25 |    IconButton
  26 |  } from "@mui/material";
  27 |  import SendIcon from "@mui/icons-material/Send";
     |                        ^
  28 |  import "./InputPanel.css";
  29 |  import { motion } from "framer-motion";
      at TransformPluginContext._formatLog (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:31446:43)
      at TransformPluginContext.error (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:31443:14)
      at normalizeUrl (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:29992:18)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:30050:32
      at async Promise.all (index 5)
      at async TransformPluginContext.transform (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:30018:4)
      at async EnvironmentPluginContainer.transform (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:31260:14)
      at async loadAndTransform (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:26434:26)
02:40:51 [vite] (client) Pre-transform error: Failed to resolve import "@mui/icons-material/Send" from "src/components/InputPanel/InputPanel.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: E:/–°ode/C4Designer/open-webui/src/components/InputPanel/InputPanel.tsx:10:21
  25 |    IconButton
  26 |  } from "@mui/material";
  27 |  import SendIcon from "@mui/icons-material/Send";
     |                        ^
  28 |  import "./InputPanel.css";
  29 |  import { motion } from "framer-motion";
02:40:51 [vite] Internal server error: Failed to resolve import "@mui/icons-material/Send" from "src/components/AIAssistant/AIAssistant.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: E:/–°ode/C4Designer/open-webui/src/components/AIAssistant/AIAssistant.tsx:13:21
  28 |    Paper
  29 |  } from "@mui/material";
  30 |  import SendIcon from "@mui/icons-material/Send";
     |                        ^
  31 |  import SmartToyIcon from "@mui/icons-material/SmartToy";
  32 |  import { motion, AnimatePresence } from "framer-motion";
      at TransformPluginContext._formatLog (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:31446:43)
      at TransformPluginContext.error (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:31443:14)
      at normalizeUrl (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:29992:18)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:30050:32
      at async Promise.all (index 5)
      at async TransformPluginContext.transform (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:30018:4)
      at async EnvironmentPluginContainer.transform (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:31260:14)
      at async loadAndTransform (file:///E:/%D0%A1ode/C4Designer/open-webui/node_modules/vite/dist/node/chunks/dep-Bsx9IwL8.js:26434:26)
02:40:51 [vite] (client) Pre-transform error: Failed to resolve import "@mui/icons-material/Send" from "src/components/AIAssistant/AIAssistant.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: E:/–°ode/C4Designer/open-webui/src/components/AIAssistant/AIAssistant.tsx:13:21
  28 |    Paper
  29 |  } from "@mui/material";
  30 |  import SendIcon from "@mui/icons-material/Send";
     |                        ^
  31 |  import SmartToyIcon from "@mui/icons-material/SmartToy";
  32 |  import { motion, AnimatePresence } from "framer-motion";
–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–∞–∫–µ—Ç–∞ —Å –∏–∫–æ–Ω–∫–∞–º–∏ –¥–ª—è Material UI. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º —ç—Ç–æ:

–£—Å—Ç–∞–Ω–æ–≤–∏–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –ø–∞–∫–µ—Ç:

bash
npm install @mui/icons-material
–û–±–Ω–æ–≤–∏–º –∏–º–ø–æ—Ä—Ç—ã –≤ —Ñ–∞–π–ª–∞—Ö, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–∫–æ–Ω–∫–∏:

src/components/InputPanel/InputPanel.tsx:

tsx
// –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –∑–∞–º–µ–Ω–∏—Ç–µ –∏–º–ø–æ—Ä—Ç
import SendIcon from '@mui/icons-material/Send';
src/components/AIAssistant/AIAssistant.tsx:

tsx
// –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –∑–∞–º–µ–Ω–∏—Ç–µ –∏–º–ø–æ—Ä—Ç—ã
import SendIcon from '@mui/icons-material/Send';
import SmartToyIcon from '@mui/icons-material/SmartToy';
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

–£–¥–∞–ª–∏—Ç–µ –ø–∞–ø–∫—É node_modules –∏ —Ñ–∞–π–ª package-lock.json:

bash
rm -rf node_modules
rm package-lock.json
–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

bash
npm install
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

bash
npm run dev
–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å Material UI, –º—ã –º–æ–∂–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –∏–∫–æ–Ω–∫–∏ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –º–µ—Ç–∫–∏:

–î–ª—è InputPanel.tsx:

tsx
// –ó–∞–º–µ–Ω–∏—Ç–µ
<IconButton
  color="primary"
  onClick={handleSubmit}
  disabled={isLoading || !requirements.trim()}
>
  {isLoading ? (
    <CircularProgress size={24} color="inherit" />
  ) : (
    <SendIcon />
  )}
</IconButton>

// –ù–∞
<Button
  variant="contained"
  color="primary"
  onClick={handleSubmit}
  disabled={isLoading || !requirements.trim()}
  sx={{ ml: 1 }}
>
  {isLoading ? <CircularProgress size={24} color="inherit" /> : "Create"}
</Button>
–î–ª—è AIAssistant.tsx:

tsx
// –ó–∞–º–µ–Ω–∏—Ç–µ
<IconButton 
  onClick={handleSend}
  disabled={!input.trim()}
  size="small"
  sx={{ color: 'primary.main' }}
>
  <SendIcon />
</IconButton>

// –ù–∞
<Button 
  variant="contained"
  color="primary"
  onClick={handleSend}
  disabled={!input.trim()}
  size="small"
  sx={{ ml: 1 }}
>
  Send
</Button>
–≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –∏–∫–æ–Ω–æ–∫. –ü–æ–∑–∂–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –∏–∫–æ–Ω–∫–∏ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

—É—Å—Ç–∞–Ω–æ–≤–∏–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –ø–∞–∫–µ—Ç –∏ –≤–≤–µ–ª –∫–æ–º–∞–Ω–¥—É: npm run dev, –≤ –∫–æ–Ω—Å–æ–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç - –ø—É—Å—Ç–æ, –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ ‚ûú  Local:   http://localhost:5173/, –±–µ–ª–∞—è –ø—É—Å—Ç–æ—Ç–∞, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç—Å—É—Ç—Å–≤—É–µ—Ç, –≤ —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞, —Ä–µ—à–∏. –í–æ –≤—Ä–µ–º—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞ VScode –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–ª –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞.
–ü–æ—Ö–æ–∂–µ, –ø—Ä–æ–±–ª–µ–º–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –æ—à–∏–±–∫–∞–º–∏ –≤ –∫–æ–¥–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ –≤—ã—è–≤–ª–µ–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –≤—ã–∑–≤–∞—Ç—å –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω:

1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ DiagramEditor.tsx
src/components/DiagramEditor/DiagramEditor.tsx:

tsx
// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç
import React, { useCallback } from 'react'
import ReactFlow, { 
  Controls, 
  Background, 
  MiniMap,
  Node,
  Edge,
  NodeTypes,
  ReactFlowProvider
} from 'reactflow'
import 'reactflow/dist/style.css'
import './DiagramEditor.css'
import { motion } from 'framer-motion'
import CustomNode from './CustomNode' // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø—É—Ç—å

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ CustomNode.tsx
src/components/DiagramEditor/CustomNode.tsx:

tsx
// –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç NodeProps
import React from 'react'
import { Handle, Position, NodeProps } from 'reactflow'
import { motion } from 'framer-motion'

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ App.tsx
src/App.tsx:

tsx
// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
import React, { useState } from 'react'
import DiagramEditor from './components/DiagramEditor/DiagramEditor'
import InputPanel from './components/InputPanel/InputPanel'
import CodePanel from './components/CodePanel/CodePanel'
import AIAssistant from './components/AIAssistant/AIAssistant'
import { Box, Grid, Paper, Typography } from '@mui/material'
import { motion } from 'framer-motion'

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ AIAssistant.tsx
src/components/AIAssistant/AIAssistant.tsx:

tsx
// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
import React, { useState } from 'react'
import { 
  Box, 
  Typography, 
  TextField, 
  IconButton, 
  List, 
  ListItem, 
  ListItemText,
  Avatar,
  Paper
} from '@mui/material'
import SendIcon from '@mui/icons-material/Send'
import SmartToyIcon from '@mui/icons-material/SmartToy'
import { motion, AnimatePresence } from 'framer-motion'

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å—Ç–∏–ª–µ–π
src/index.css (–¥–æ–ø–æ–ª–Ω–∏—Ç—å):

css
/* –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ */
html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.MuiPaper-root {
  background-color: #1e1e1e !important;
  color: #e0e0e0 !important;
}

.MuiTextField-root .MuiInputBase-root {
  color: #e0e0e0 !important;
}

.MuiTextField-root .MuiInputLabel-root {
  color: #a0a0a0 !important;
}

.MuiTextField-root .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline {
  border-color: #444 !important;
}
6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞
src/main.tsx:

tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'
import { ThemeProvider, createTheme } from '@mui/material/styles' // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç
import CssBaseline from '@mui/material/CssBaseline'

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
7. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ fallback –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∫–æ–¥–∞
src/components/CodePanel/CodePanel.tsx:

tsx
import React, { useState } from 'react' // –î–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç useState
import Editor from '@monaco-editor/react'
import { Box, Typography } from '@mui/material'
import './CodePanel.css'
import { motion } from 'framer-motion'

interface CodePanelProps {
  code: string
}

const CodePanel: React.FC<CodePanelProps> = ({ code }) => {
  const [editorLoaded, setEditorLoaded] = useState(false)

  return (
    <Box className="code-panel">
      <Typography variant="h6" sx={{ p: 2, borderBottom: '1px solid #333' }}>
        Generated Diagram Code
      </Typography>
      
      <motion.div 
        className="editor-container"
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 0.5 }}
      >
        {!editorLoaded && (
          <Box sx={{ 
            height: '100%', 
            display: 'flex', 
            justifyContent: 'center', 
            alignItems: 'center',
            backgroundColor: '#1e1e1e'
          }}>
            <Typography>Loading code editor...</Typography>
          </Box>
        )}
        
        <Editor
          height="100%"
          language="c4"
          value={code}
          theme="vs-dark"
          options={{
            readOnly: true,
            minimap: { enabled: true },
            fontSize: 14,
            scrollBeyondLastLine: false,
            automaticLayout: true,
          }}
          onMount={() => setEditorLoaded(true)}
        />
      </motion.div>
    </Box>
  )
}

export default CodePanel
8. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –æ—Ç–ª–∞–¥–∫–æ–π
–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ñ–ª–∞–≥–æ–º --debug:

bash
npm run dev -- --debug
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫–∏ Console –∏ Network –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º React:

src/main.tsx:

tsx
// –ó–∞–º–µ–Ω–∏—Ç—å
<React.StrictMode>
  <ThemeProvider theme={darkTheme}>
    <CssBaseline />
    <App />
  </ThemeProvider>
</React.StrictMode>

// –ù–∞
<ThemeProvider theme={darkTheme}>
  <CssBaseline />
  <App />
</ThemeProvider>
–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:

src/App.tsx:

tsx
import React from 'react'
import { Button, Typography } from '@mui/material'

const App: React.FC = () => {
  return (
    <div style={{ padding: 20 }}>
      <Typography variant="h4">Test Component</Typography>
      <Button variant="contained" color="primary">
        Test Button
      </Button>
    </div>
  )
}

export default App
–ï—Å–ª–∏ —ç—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ –æ–¥–Ω–æ–º –∏–∑ –≤–∞—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π.

–û—à–∏–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
open-webui\src\components\DiagramEditor\DiagramEditor.tsx
[{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2307",
	"severity": 8,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –º–æ–¥—É–ª—å \"./components/DiagramEditor/DiagramEditor\" –∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤.",
	"source": "ts",
	"startLineNumber": 2,
	"startColumn": 27,
	"endLineNumber": 2,
	"endColumn": 69
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2307",
	"severity": 8,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –º–æ–¥—É–ª—å \"./components/InputPanel/InputPanel\" –∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤.",
	"source": "ts",
	"startLineNumber": 3,
	"startColumn": 24,
	"endLineNumber": 3,
	"endColumn": 60
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2307",
	"severity": 8,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –º–æ–¥—É–ª—å \"./components/CodePanel/CodePanel\" –∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤.",
	"source": "ts",
	"startLineNumber": 4,
	"startColumn": 23,
	"endLineNumber": 4,
	"endColumn": 57
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2307",
	"severity": 8,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –º–æ–¥—É–ª—å \"./components/AIAssistant/AIAssistant\" –∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤.",
	"source": "ts",
	"startLineNumber": 5,
	"startColumn": 25,
	"endLineNumber": 5,
	"endColumn": 63
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2769",
	"severity": 8,
	"message": "–ù–∏ –æ–¥–Ω–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç—Ç–æ–º—É –≤—ã–∑–æ–≤—É.\n  –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ 1 –∏–∑ 2, \"(props: { component: ElementType<any, keyof IntrinsicElements>; } & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<...> & Omit<...>): Element | null\", –≤–æ–∑–≤—Ä–∞—Ç–∏–ª–∞ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É.\n    –°–≤–æ–π—Å—Ç–≤–æ \"component\" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"{ children: Element; item: true; xs: number; sx: { height: string; }; }\" –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –≤ —Ç–∏–ø–µ \"{ component: ElementType<any, keyof IntrinsicElements>; }\".\n  –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ 2 –∏–∑ 2, \"(props: DefaultComponentProps<GridTypeMap<{}, \"div\">>): Element | null\", –≤–æ–∑–≤—Ä–∞—Ç–∏–ª–∞ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É.\n    –¢–∏–ø \"{ children: Element; item: true; xs: number; sx: { height: string; }; }\" –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–∏–ø–∞ \"IntrinsicAttributes & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<Theme> & Omit<...>\".\n      –°–≤–æ–π—Å—Ç–≤–æ \"item\" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"IntrinsicAttributes & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<Theme> & Omit<...>\".",
	"source": "ts",
	"startLineNumber": 54,
	"startColumn": 10,
	"endLineNumber": 54,
	"endColumn": 14,
	"relatedInformation": [
		{
			"startLineNumber": 64,
			"startColumn": 5,
			"endLineNumber": 64,
			"endColumn": 14,
			"message": "–ó–¥–µ—Å—å –æ–±—ä—è–≤–ª–µ–Ω \"component\".",
			"resource": "/e:/–°ode/C4Designer/open-webui/node_modules/@mui/types/esm/index.d.ts"
		}
	]
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2769",
	"severity": 8,
	"message": "–ù–∏ –æ–¥–Ω–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç—Ç–æ–º—É –≤—ã–∑–æ–≤—É.\n  –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ 1 –∏–∑ 2, \"(props: { component: ElementType<any, keyof IntrinsicElements>; } & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<...> & Omit<...>): Element | null\", –≤–æ–∑–≤—Ä–∞—Ç–∏–ª–∞ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É.\n    –°–≤–æ–π—Å—Ç–≤–æ \"component\" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"{ children: Element[]; item: true; xs: number; sx: { display: \"flex\"; flexDirection: \"column\"; height: string; }; }\" –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –≤ —Ç–∏–ø–µ \"{ component: ElementType<any, keyof IntrinsicElements>; }\".\n  –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ 2 –∏–∑ 2, \"(props: DefaultComponentProps<GridTypeMap<{}, \"div\">>): Element | null\", –≤–æ–∑–≤—Ä–∞—Ç–∏–ª–∞ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É.\n    –¢–∏–ø \"{ children: Element[]; item: true; xs: number; sx: { display: \"flex\"; flexDirection: \"column\"; height: string; }; }\" –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–∏–ø–∞ \"IntrinsicAttributes & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<Theme> & Omit<...>\".\n      –°–≤–æ–π—Å—Ç–≤–æ \"item\" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"IntrinsicAttributes & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<Theme> & Omit<...>\".",
	"source": "ts",
	"startLineNumber": 60,
	"startColumn": 10,
	"endLineNumber": 60,
	"endColumn": 14,
	"relatedInformation": [
		{
			"startLineNumber": 64,
			"startColumn": 5,
			"endLineNumber": 64,
			"endColumn": 14,
			"message": "–ó–¥–µ—Å—å –æ–±—ä—è–≤–ª–µ–Ω \"component\".",
			"resource": "/e:/–°ode/C4Designer/open-webui/node_modules/@mui/types/esm/index.d.ts"
		}
	]
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "6133",
	"severity": 4,
	"message": "–°–≤–æ–π—Å—Ç–≤–æ \"requirements\" –æ–±—ä—è–≤–ª–µ–Ω–æ, –Ω–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ.",
	"source": "ts",
	"startLineNumber": 14,
	"startColumn": 32,
	"endLineNumber": 14,
	"endColumn": 44,
	"tags": [
		1
	]
}]



src\components\DiagramEditor\CustomNode.tsx
[{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/components/DiagramEditor/CustomNode.tsx",
	"owner": "typescript",
	"code": "1484",
	"severity": 8,
	"message": "' NodeProps ' —è–≤–ª—è–µ—Ç—Å—è —Ç–∏–ø–æ–º –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–ª—å–∫–æ —Ç–∏–ø–∞, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω 'verbatimModuleSyntax'.",
	"source": "ts",
	"startLineNumber": 2,
	"startColumn": 28,
	"endLineNumber": 2,
	"endColumn": 37
}]


src\components\DiagramEditor\DiagramEditor.tsx
[{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/components/DiagramEditor/DiagramEditor.tsx",
	"owner": "typescript",
	"code": "1484",
	"severity": 8,
	"message": "' Node ' —è–≤–ª—è–µ—Ç—Å—è —Ç–∏–ø–æ–º –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–ª—å–∫–æ —Ç–∏–ø–∞, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω 'verbatimModuleSyntax'.",
	"source": "ts",
	"startLineNumber": 6,
	"startColumn": 3,
	"endLineNumber": 6,
	"endColumn": 7
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/components/DiagramEditor/DiagramEditor.tsx",
	"owner": "typescript",
	"code": "1484",
	"severity": 8,
	"message": "' Edge ' —è–≤–ª—è–µ—Ç—Å—è —Ç–∏–ø–æ–º –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–ª—å–∫–æ —Ç–∏–ø–∞, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω 'verbatimModuleSyntax'.",
	"source": "ts",
	"startLineNumber": 7,
	"startColumn": 3,
	"endLineNumber": 7,
	"endColumn": 7
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/components/DiagramEditor/DiagramEditor.tsx",
	"owner": "typescript",
	"code": "1484",
	"severity": 8,
	"message": "' NodeTypes ' —è–≤–ª—è–µ—Ç—Å—è —Ç–∏–ø–æ–º –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–ª—å–∫–æ —Ç–∏–ø–∞, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω 'verbatimModuleSyntax'.",
	"source": "ts",
	"startLineNumber": 8,
	"startColumn": 3,
	"endLineNumber": 8,
	"endColumn": 12
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/components/DiagramEditor/DiagramEditor.tsx",
	"owner": "typescript",
	"code": "2307",
	"severity": 8,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –º–æ–¥—É–ª—å \"./CustomNode\" –∏–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤.",
	"source": "ts",
	"startLineNumber": 14,
	"startColumn": 24,
	"endLineNumber": 14,
	"endColumn": 38
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/components/DiagramEditor/DiagramEditor.tsx",
	"owner": "typescript",
	"code": "6133",
	"severity": 4,
	"message": "–°–≤–æ–π—Å—Ç–≤–æ \"Edge\" –æ–±—ä—è–≤–ª–µ–Ω–æ, –Ω–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ.",
	"source": "ts",
	"startLineNumber": 7,
	"startColumn": 3,
	"endLineNumber": 7,
	"endColumn": 7,
	"tags": [
		1
	]
}]
–î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º –≤—Å–µ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:

1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ App.tsx
src/App.tsx:

tsx
import React, { useState } from 'react';
import DiagramEditor from './components/DiagramEditor/DiagramEditor';
import InputPanel from './components/InputPanel/InputPanel';
import CodePanel from './components/CodePanel/CodePanel';
import AIAssistant from './components/AIAssistant/AIAssistant';
import { Box, Grid, Paper, Typography } from '@mui/material';
import { motion } from 'framer-motion';

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Grid –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ App.tsx
src/App.tsx (—á–∞—Å—Ç—å —Å Grid):

tsx
<Grid container sx={{ flex: 1, overflow: 'hidden' }}>
  <Grid item xs={8} sx={{ height: '100%' }}>
    <Paper sx={{ height: '100%', borderRadius: 2, m: 1, overflow: 'hidden', position: 'relative' }}>
      <DiagramEditor data={diagramData} />
    </Paper>
  </Grid>
  
  <Grid item xs={4} sx={{ display: 'flex', flexDirection: 'column', height: '100%' }}>
    <Paper sx={{ flex: 1, borderRadius: 2, m: 1, overflow: 'hidden' }}>
      <CodePanel code={generatedCode} />
    </Paper>
    
    <Paper sx={{ borderRadius: 2, m: 1, overflow: 'hidden' }}>
      <AIAssistant />
    </Paper>
  </Grid>
</Grid>
3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ —Ç–∏–ø–æ–≤ –≤ DiagramEditor
src/components/DiagramEditor/DiagramEditor.tsx:

tsx
import React, { useCallback } from 'react';
import ReactFlow, { 
  Controls, 
  Background, 
  MiniMap,
  ReactFlowProvider
} from 'reactflow';
import type { 
  Node,
  Edge,
  NodeTypes
} from 'reactflow';
import 'reactflow/dist/style.css';
import './DiagramEditor.css';
import { motion } from 'framer-motion';
import CustomNode from './CustomNode';

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ CustomNode
src/components/DiagramEditor/DiagramEditor.tsx (–∏–º–ø–æ—Ä—Ç CustomNode):

tsx
import CustomNode from './CustomNode';
5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ CustomNode
src/components/DiagramEditor/CustomNode.tsx:

tsx
import React from 'react';
import { Handle, Position } from 'reactflow';
import type { NodeProps } from 'reactflow';
import { motion } from 'framer-motion';

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
6. –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ App.tsx
src/App.tsx (—É–¥–∞–ª–∏–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ):

tsx
// –£–¥–∞–ª–∏–º —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
// const [requirements, setRequirements] = useState('')

// –ó–∞–º–µ–Ω–∏–º —Ñ—É–Ω–∫—Ü–∏—é handleCreateDiagram:
const handleCreateDiagram = (inputRequirements: string) => {
  setIsProcessing(true);
  
  // –≠–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã ML-—è–¥—Ä–∞
  setTimeout(() => {
    // ... –∫–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ...
  }, 2000);
};
7. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—É—Ç–µ–π –∏–º–ø–æ—Ä—Ç–æ–≤
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:

text
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ DiagramEditor/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DiagramEditor.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DiagramEditor.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CustomNode.tsx
‚îÇ   ‚îú‚îÄ‚îÄ InputPanel/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InputPanel.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ InputPanel.css
‚îÇ   ‚îú‚îÄ‚îÄ CodePanel/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CodePanel.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CodePanel.css
‚îÇ   ‚îî‚îÄ‚îÄ AIAssistant/
‚îÇ       ‚îî‚îÄ‚îÄ AIAssistant.tsx
8. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ tsconfig.json (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
tsconfig.json:

json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "types": ["vite/client"],
    "allowJs": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true
  },
  "include": ["src"],
  "exclude": ["node_modules"]
}
9. –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
–í–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ —É–¥–∞–ª–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ DiagramEditor.tsx:

tsx
// –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
// import { Edge } from 'reactflow'; // –£–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
10. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

bash
npm run dev
–ï—Å–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

–£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É node_modules –∏ —Ñ–∞–π–ª package-lock.json

–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

bash
npm install
–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞:

bash
npm run dev
–≠—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Ä–µ—à–∏—Ç—å –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ –∏ —Ç–∏–ø–∞–º–∏, –∞ —Ç–∞–∫–∂–µ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.

–µ—â–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª, –≤—Å–µ —Å–¥–µ–ª–∞–ª –∫–∞–∫ —Ç—ã —Å–∫–∞–∑–∞–ª –Ω–æ –æ—Å—Ç–∞–ª–æ—Å—å —ç—Ç–æ -- [{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2769",
	"severity": 8,
	"message": "–ù–∏ –æ–¥–Ω–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç—Ç–æ–º—É –≤—ã–∑–æ–≤—É.\n  –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ 1 –∏–∑ 2, \"(props: { component: ElementType<any, keyof IntrinsicElements>; } & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<...> & Omit<...>): Element | null\", –≤–æ–∑–≤—Ä–∞—Ç–∏–ª–∞ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É.\n    –°–≤–æ–π—Å—Ç–≤–æ \"component\" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"{ children: Element; item: true; xs: number; sx: { height: string; }; }\" –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –≤ —Ç–∏–ø–µ \"{ component: ElementType<any, keyof IntrinsicElements>; }\".\n  –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ 2 –∏–∑ 2, \"(props: DefaultComponentProps<GridTypeMap<{}, \"div\">>): Element | null\", –≤–æ–∑–≤—Ä–∞—Ç–∏–ª–∞ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É.\n    –¢–∏–ø \"{ children: Element; item: true; xs: number; sx: { height: string; }; }\" –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–∏–ø–∞ \"IntrinsicAttributes & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<Theme> & Omit<...>\".\n      –°–≤–æ–π—Å—Ç–≤–æ \"item\" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"IntrinsicAttributes & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<Theme> & Omit<...>\".",
	"source": "ts",
	"startLineNumber": 54,
	"startColumn": 10,
	"endLineNumber": 54,
	"endColumn": 14,
	"relatedInformation": [
		{
			"startLineNumber": 64,
			"startColumn": 5,
			"endLineNumber": 64,
			"endColumn": 14,
			"message": "–ó–¥–µ—Å—å –æ–±—ä—è–≤–ª–µ–Ω \"component\".",
			"resource": "/e:/–°ode/C4Designer/open-webui/node_modules/@mui/types/index.d.ts"
		}
	]
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2769",
	"severity": 8,
	"message": "–ù–∏ –æ–¥–Ω–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç—Ç–æ–º—É –≤—ã–∑–æ–≤—É.\n  –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ 1 –∏–∑ 2, \"(props: { component: ElementType<any, keyof IntrinsicElements>; } & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<...> & Omit<...>): Element | null\", –≤–æ–∑–≤—Ä–∞—Ç–∏–ª–∞ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É.\n    –°–≤–æ–π—Å—Ç–≤–æ \"component\" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"{ children: Element[]; item: true; xs: number; sx: { display: \"flex\"; flexDirection: \"column\"; height: string; }; }\" –∏ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –≤ —Ç–∏–ø–µ \"{ component: ElementType<any, keyof IntrinsicElements>; }\".\n  –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ 2 –∏–∑ 2, \"(props: DefaultComponentProps<GridTypeMap<{}, \"div\">>): Element | null\", –≤–æ–∑–≤—Ä–∞—Ç–∏–ª–∞ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É.\n    –¢–∏–ø \"{ children: Element[]; item: true; xs: number; sx: { display: \"flex\"; flexDirection: \"column\"; height: string; }; }\" –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–∏–ø–∞ \"IntrinsicAttributes & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<Theme> & Omit<...>\".\n      –°–≤–æ–π—Å—Ç–≤–æ \"item\" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"IntrinsicAttributes & GridBaseProps & { sx?: SxProps<Theme> | undefined; } & SystemProps<Theme> & Omit<...>\".",
	"source": "ts",
	"startLineNumber": 60,
	"startColumn": 8,
	"endLineNumber": 60,
	"endColumn": 12,
	"relatedInformation": [
		{
			"startLineNumber": 64,
			"startColumn": 5,
			"endLineNumber": 64,
			"endColumn": 14,
			"message": "–ó–¥–µ—Å—å –æ–±—ä—è–≤–ª–µ–Ω \"component\".",
			"resource": "/e:/–°ode/C4Designer/open-webui/node_modules/@mui/types/index.d.ts"
		}
	]
}]
–û—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Grid –∏–∑ Material UI. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º –∏—Ö, –∑–∞–º–µ–Ω–∏–≤ Grid –Ω–∞ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Box, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ (item/container):

src/App.tsx (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è):

tsx
import React, { useState } from 'react';
import DiagramEditor from './components/DiagramEditor/DiagramEditor';
import InputPanel from './components/InputPanel/InputPanel';
import CodePanel from './components/CodePanel/CodePanel';
import AIAssistant from './components/AIAssistant/AIAssistant';
import { Box, Paper, Typography } from '@mui/material';
import { motion } from 'framer-motion';

const App: React.FC = () => {
  const [diagramData, setDiagramData] = useState<any>(null);
  const [generatedCode, setGeneratedCode] = useState<string>('');
  const [isProcessing, setIsProcessing] = useState<boolean>(false);

  const handleCreateDiagram = (requirements: string) => {
    setIsProcessing(true);
    
    // –≠–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã ML-—è–¥—Ä–∞
    setTimeout(() => {
      const mockDiagram = {
        nodes: [
          { id: '1', position: { x: 100, y: 100 }, data: { label: 'Client App' } },
          { id: '2', position: { x: 400, y: 100 }, data: { label: 'API Server' } },
          { id: '3', position: { x: 400, y: 300 }, data: { label: 'Database' } },
        ],
        edges: [
          { id: 'e1-2', source: '1', target: '2', label: 'HTTP Requests' },
          { id: 'e2-3', source: '2', target: '3', label: 'SQL Queries' },
        ]
      };
      
      const mockCode = `// C4 Diagram Code
System(clientApp, "Client Application", "React-based UI")
System(apiServer, "API Server", "Node.js with Express")
System(db, "Database", "PostgreSQL")

Rel(clientApp, apiServer, "HTTP Requests", "JSON/HTTPS")
Rel(apiServer, db, "SQL Queries", "TCP")`;
      
      setDiagramData(mockDiagram);
      setGeneratedCode(mockCode);
      setIsProcessing(false);
    }, 2000);
  };

  return (
    <Box sx={{ 
      height: '100vh', 
      display: 'flex', 
      flexDirection: 'column', 
      bgcolor: 'background.default' 
    }}>
      <Box sx={{ p: 2, borderBottom: '1px solid', borderColor: 'divider' }}>
        <Typography variant="h4" component="h1" sx={{ fontWeight: 'bold' }}>
          C4 Model Architect
        </Typography>
      </Box>
      
      {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <Box sx={{ 
        flex: 1, 
        display: 'flex', 
        overflow: 'hidden',
        gap: '16px',
        p: '8px'
      }}>
        {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –¥–∏–∞–≥—Ä–∞–º–º–∞ */}
        <Box sx={{ 
          flex: 3, 
          height: '100%',
          minWidth: 0 // –î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è
        }}>
          <Paper sx={{ 
            height: '100%', 
            borderRadius: 2, 
            overflow: 'hidden', 
            position: 'relative' 
          }}>
            <DiagramEditor data={diagramData} />
          </Paper>
        </Box>
        
        {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –∫–æ–¥ –∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç */}
        <Box sx={{ 
          flex: 1, 
          display: 'flex', 
          flexDirection: 'column', 
          height: '100%',
          minWidth: 0, // –î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è
          gap: '16px'
        }}>
          <Paper sx={{ 
            flex: 1, 
            borderRadius: 2, 
            overflow: 'hidden',
            minHeight: 0 // –î–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è
          }}>
            <CodePanel code={generatedCode} />
          </Paper>
          
          <Paper sx={{ 
            borderRadius: 2, 
            overflow: 'hidden',
            flexShrink: 0,
            height: '30%'
          }}>
            <AIAssistant />
          </Paper>
        </Box>
      </Box>
      
      <motion.div
        initial={{ y: 100 }}
        animate={{ y: 0 }}
        transition={{ type: 'spring', damping: 25 }}
      >
        <InputPanel onCreate={handleCreateDiagram} isLoading={isProcessing} />
      </motion.div>
    </Box>
  );
};

export default App;
–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
–£–¥–∞–ª–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Grid:

–í–º–µ—Å—Ç–æ Grid container –∏ Grid item –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Box —Å flex-—Å–≤–æ–π—Å—Ç–≤–∞–º–∏

–≠—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –æ—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å Grid

–£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞–∫–µ—Ç–∞:

–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: display: flex, flex-direction: column

–ö–æ–Ω—Ç–µ–Ω—Ç–Ω–∞—è –æ–±–ª–∞—Å—Ç—å: display: flex, —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –ª–µ–≤—É—é (70%) –∏ –ø—Ä–∞–≤—É—é (30%) —á–∞—Å—Ç–∏

–ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: display: flex, flex-direction: column (–∫–æ–¥ —Å–≤–µ—Ä—Ö—É, –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å–Ω–∏–∑—É)

–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è:

minWidth: 0 –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤—ã—Ö–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã

minHeight: 0 –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç—É —Å–∂–∏–º–∞—Ç—å—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

flexShrink: 0 –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ—Ç—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

–ì–∞–ø—ã –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏:

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ (gap) –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –±–ª–æ–∫–∞–º–∏

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã (padding) –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ —Ö–æ—Ä–æ—à–æ –≤–æ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö. Flexbox-–ø–æ–¥—Ö–æ–¥ —Ç–∞–∫–∂–µ –ø—Ä–æ—â–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

–æ—Ç–ª–∏—á–Ω–æ! –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç, –¥–∞–≤–∞–π –ø—Ä–æ–¥–æ–ª–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –≤—Å–µ —Ç–∞–∫–∏ –Ω—É–∂–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å –¥–≤–µ –æ–±—É—á–µ–Ω–Ω—ã–µ ML-–º–æ–¥–µ–ª–∏ –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–µ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –ù–ê–ü–û–ú–ò–ù–ê–Æ: NER –º–æ–¥–µ–ª—å - —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏
RE –º–æ–¥–µ–ª—å - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
–æ–±–µ –æ–±—É—á–µ–Ω—ã –Ω–∞ –æ–¥–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ, –≤–æ—Ç –ø—Ä–∏–º–µ—Ä –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞:
             {
                        "tokens": ["–°–∏—Å—Ç–µ–º–∞", "—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç", "–¥–∞–Ω–Ω—ã–µ", "–≤", "PostgreSQL"],
                        "ner_tags": ["B-SYSTEM", "B-VERB", "O", "O", "B-DATABASE"],
                        "relations": [{"head": 0, "tail": 4, "type": "stores_in"}]
                    },
—Ç–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–≤—è–∑–µ–π: uses, contains, stores_in, produces, retrieves_from, triggers, monitors, delivers_to, depends_on, communicates_with, interacts_with
–∏ —Å–ø–∏—Å–æ–∫ BIO-—Ç–µ–≥–æ–≤: B-SYSTEM, B-CONTAINER, B-COMPONENT, B-ACTOR, B-EXTERNAL_SYSTEM, B-DATABASE, B-QUEUE, B-VERB
–û—Ç–ª–∏—á–Ω–æ, —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç! –î–∞–≤–∞–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º ML-–º–æ–¥–µ–ª–∏. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –Ω—É–∂–Ω–æ:

–°–æ–∑–¥–∞—Ç—å Python-–±—ç–∫–µ–Ω–¥ —Å Flask/FastAPI

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é NER –∏ RE –º–æ–¥–µ–ª–µ–π

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±—ç–∫–µ–Ω–¥ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

–®–∞–≥ 1: –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±—ç–∫–µ–Ω–¥–∞
–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–µ–Ω–¥–∞:

bash
mkdir backend
cd backend
backend/app.py:

python
from flask import Flask, request, jsonify
from flask_cors import CORS
import numpy as np
import torch
from transformers import AutoTokenizer, AutoModelForTokenClassification, AutoModelForSequenceClassification

app = Flask(__name__)
CORS(app)  # –†–∞–∑—Ä–µ—à–∞–µ–º CORS –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏)
ner_tokenizer = AutoTokenizer.from_pretrained("bert-base-cased")
ner_model = AutoModelForTokenClassification.from_pretrained("bert-base-cased")

re_tokenizer = AutoTokenizer.from_pretrained("bert-base-uncased")
re_model = AutoModelForSequenceClassification.from_pretrained("bert-base-uncased")

# –°–ø–∏—Å–∫–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
ENTITY_TYPES = ["SYSTEM", "CONTAINER", "COMPONENT", "ACTOR", "EXTERNAL_SYSTEM", "DATABASE", "QUEUE", "VERB"]
RELATION_TYPES = ["uses", "contains", "stores_in", "produces", "retrieves_from", 
                  "triggers", "monitors", "delivers_to", "depends_on", "communicates_with", "interacts_with"]

def predict_entities(text):
    """–§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π —Å –ø–æ–º–æ—â—å—é NER –º–æ–¥–µ–ª–∏"""
    inputs = ner_tokenizer(text, return_tensors="pt", truncation=True, max_length=512)
    outputs = ner_model(**inputs)
    predictions = torch.argmax(outputs.logits, dim=2)
    
    tokens = ner_tokenizer.convert_ids_to_tokens(inputs["input_ids"][0])
    entities = []
    current_entity = ""
    current_tag = ""
    
    for token, prediction in zip(tokens, predictions[0]):
        tag_idx = prediction.item()
        tag = ner_model.config.id2label[tag_idx]
        
        if tag.startswith("B-"):
            if current_entity:
                entities.append({"text": current_entity, "type": current_tag})
            current_entity = token.replace("##", "")
            current_tag = tag[2:]
        elif tag.startswith("I-") and current_tag == tag[2:]:
            current_entity += token.replace("##", "")
        else:
            if current_entity:
                entities.append({"text": current_entity, "type": current_tag})
            current_entity = ""
            current_tag = ""
    
    if current_entity:
        entities.append({"text": current_entity, "type": current_tag})
    
    return entities

def predict_relations(entities, text):
    """–§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ —Å –ø–æ–º–æ—â—å—é RE –º–æ–¥–µ–ª–∏"""
    relations = []
    
    # –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
    if len(entities) >= 2:
        for i in range(len(entities) - 1):
            relations.append({
                "head": entities[i]["text"],
                "tail": entities[i+1]["text"],
                "type": np.random.choice(RELATION_TYPES)
            })
    
    return relations

@app.route('/process', methods=['POST'])
def process_text():
    data = request.json
    text = data.get('text', '')
    
    # –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º —Å—É—â–Ω–æ—Å—Ç–∏
    entities = predict_entities(text)
    
    # –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è
    relations = predict_relations(entities, text)
    
    return jsonify({
        "entities": entities,
        "relations": relations
    })

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)
–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –±—ç–∫–µ–Ω–¥–∞
–°–æ–∑–¥–∞–π—Ç–µ backend/requirements.txt:

text
flask
flask-cors
numpy
torch
transformers
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

bash
pip install -r requirements.txt
–®–∞–≥ 3: –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º –±—ç–∫–µ–Ω–¥ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
–û–±–Ω–æ–≤–∏–º src/App.tsx:

tsx
import React, { useState } from 'react';
import DiagramEditor from './components/DiagramEditor/DiagramEditor';
import InputPanel from './components/InputPanel/InputPanel';
import CodePanel from './components/CodePanel/CodePanel';
import AIAssistant from './components/AIAssistant/AIAssistant';
import { Box, Paper, Typography, CircularProgress, Snackbar, Alert } from '@mui/material';
import { motion } from 'framer-motion';

// –¢–∏–ø—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
interface Entity {
  text: string;
  type: string;
}

interface Relation {
  head: string;
  tail: string;
  type: string;
}

const App: React.FC = () => {
  const [diagramData, setDiagramData] = useState<any>(null);
  const [generatedCode, setGeneratedCode] = useState<string>('');
  const [isProcessing, setIsProcessing] = useState<boolean>(false);
  const [error, setError] = useState<string | null>(null);
  const [entities, setEntities] = useState<Entity[]>([]);
  const [relations, setRelations] = useState<Relation[]>([]);

  const handleCreateDiagram = async (requirements: string) => {
    setIsProcessing(true);
    setError(null);
    
    try {
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ –±—ç–∫–µ–Ω–¥—É
      const response = await fetch('http://localhost:5000/process', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ text: requirements }),
      });
      
      if (!response.ok) {
        throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞');
      }
      
      const data = await response.json();
      setEntities(data.entities);
      setRelations(data.relations);
      
      // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã
      const nodes = data.entities.map((entity: Entity, index: number) => ({
        id: `node-${index}`,
        position: { x: 100 + index * 200, y: 100 },
        data: { 
          label: entity.text,
          entityType: entity.type
        }
      }));
      
      const edges = data.relations.map((relation: Relation, index: number) => {
        const sourceIndex = data.entities.findIndex((e: Entity) => e.text === relation.head);
        const targetIndex = data.entities.findIndex((e: Entity) => e.text === relation.tail);
        
        return {
          id: `edge-${index}`,
          source: `node-${sourceIndex}`,
          target: `node-${targetIndex}`,
          label: relation.type
        };
      });
      
      setDiagramData({ nodes, edges });
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º—ã
      generateC4Code(data.entities, data.relations);
      
    } catch (err) {
      setError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
      console.error(err);
    } finally {
      setIsProcessing(false);
    }
  };

  const generateC4Code = (entities: Entity[], relations: Relation[]) => {
    let code = "// C4 Diagram Code\n";
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π
    entities.forEach((entity, index) => {
      code += `${entity.type}(${entity.text.replace(/\s+/g, '_')}, "${entity.text}", "")\n`;
    });
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–≤—è–∑–∏
    relations.forEach(rel => {
      code += `Rel(${rel.head.replace(/\s+/g, '_')}, ${rel.tail.replace(/\s+/g, '_')}, "${rel.type}")\n`;
    });
    
    setGeneratedCode(code);
  };

  const handleCloseError = () => {
    setError(null);
  };

  return (
    <Box sx={{ 
      height: '100vh', 
      display: 'flex', 
      flexDirection: 'column', 
      bgcolor: 'background.default' 
    }}>
      <Snackbar
        open={!!error}
        autoHideDuration={6000}
        onClose={handleCloseError}
        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}
      >
        <Alert onClose={handleCloseError} severity="error" sx={{ width: '100%' }}>
          {error}
        </Alert>
      </Snackbar>
      
      <Box sx={{ p: 2, borderBottom: '1px solid', borderColor: 'divider' }}>
        <Typography variant="h4" component="h1" sx={{ fontWeight: 'bold' }}>
          C4 Model Architect
        </Typography>
      </Box>
      
      {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <Box sx={{ 
        flex: 1, 
        display: 'flex', 
        overflow: 'hidden',
        gap: '16px',
        p: '8px'
      }}>
        {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –¥–∏–∞–≥—Ä–∞–º–º–∞ */}
        <Box sx={{ 
          flex: 3, 
          height: '100%',
          minWidth: 0
        }}>
          <Paper sx={{ 
            height: '100%', 
            borderRadius: 2, 
            overflow: 'hidden', 
            position: 'relative' 
          }}>
            <DiagramEditor data={diagramData} />
          </Paper>
        </Box>
        
        {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –∫–æ–¥ –∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç */}
        <Box sx={{ 
          flex: 1, 
          display: 'flex', 
          flexDirection: 'column', 
          height: '100%',
          minWidth: 0,
          gap: '16px'
        }}>
          <Paper sx={{ 
            flex: 1, 
            borderRadius: 2, 
            overflow: 'hidden',
            minHeight: 0
          }}>
            <CodePanel code={generatedCode} />
          </Paper>
          
          <Paper sx={{ 
            borderRadius: 2, 
            overflow: 'hidden',
            flexShrink: 0,
            height: '30%'
          }}>
            <AIAssistant />
          </Paper>
        </Box>
      </Box>
      
      <motion.div
        initial={{ y: 100 }}
        animate={{ y: 0 }}
        transition={{ type: 'spring', damping: 25 }}
      >
        <InputPanel onCreate={handleCreateDiagram} isLoading={isProcessing} />
      </motion.div>
    </Box>
  );
};

export default App;
–®–∞–≥ 4: –û–±–Ω–æ–≤–ª—è–µ–º CustomNode –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∏–ø–æ–≤ —Å—É—â–Ω–æ—Å—Ç–µ–π
src/components/DiagramEditor/CustomNode.tsx:

tsx
import React from 'react';
import { Handle, Position } from 'reactflow';
import type { NodeProps } from 'reactflow';
import { motion } from 'framer-motion';

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –ø–æ —Ç–∏–ø—É —Å—É—â–Ω–æ—Å—Ç–∏
const getEntityIcon = (entityType: string) => {
  switch (entityType) {
    case 'SYSTEM': return 'üñ•Ô∏è';
    case 'CONTAINER': return 'üì¶';
    case 'COMPONENT': return '‚öôÔ∏è';
    case 'ACTOR': return 'üë§';
    case 'EXTERNAL_SYSTEM': return 'üåê';
    case 'DATABASE': return 'üíæ';
    case 'QUEUE': return 'üì´';
    case 'VERB': return 'üèÉ';
    default: return '‚ùì';
  }
};

const CustomNode: React.FC<NodeProps> = ({ data }) => {
  return (
    <motion.div 
      className="custom-node"
      initial={{ scale: 0.8, opacity: 0 }}
      animate={{ scale: 1, opacity: 1 }}
      transition={{ duration: 0.3 }}
      whileHover={{ boxShadow: '0 0 15px rgba(25, 118, 210, 0.5)' }}
    >
      <div className="node-header">
        <div className="node-icon">{getEntityIcon(data.entityType)}</div>
        <div className="node-title">{data.label}</div>
      </div>
      <div className="node-body">
        <div className="node-info">Type: {data.entityType}</div>
      </div>
      <Handle type="source" position={Position.Right} />
      <Handle type="target" position={Position.Left} />
    </motion.div>
  );
};

export default CustomNode;
–®–∞–≥ 5: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥:

bash
cd backend
python app.py
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:

bash
cd frontend
npm run dev
–®–∞–≥ 6: –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏:

–ó–∞–º–µ–Ω–∏—Ç–µ –∑–∞–≥–ª—É—à–∫–∏ –≤ predict_entities –∏ predict_relations –Ω–∞ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É–∑–ª–æ–≤:

python
# –í–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞
import networkx as nx

def calculate_positions(entities, relations):
  G = nx.Graph()
  
  # –î–æ–±–∞–≤–ª—è–µ–º —É–∑–ª—ã
  for i, entity in enumerate(entities):
    G.add_node(i, label=entity['text'])
  
  # –î–æ–±–∞–≤–ª—è–µ–º —Å–≤—è–∑–∏
  for rel in relations:
    source_idx = next(i for i, e in enumerate(entities) if e['text'] == rel['head'])
    target_idx = next(i for i, e in enumerate(entities) if e['text'] == rel['tail'])
    G.add_edge(source_idx, target_idx)
  
  # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏–∏
  pos = nx.spring_layout(G)
  return [{'x': pos[i][0] * 1000, 'y': pos[i][1] * 1000} for i in range(len(entities))]
–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–î–æ–±–∞–≤—å—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ—â–∞—Ç—å —É–∑–ª—ã

–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É –¥–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç:

tsx
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ AIAssistant –¥–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤:
const handleAIAction = async (action: string) => {
  const response = await fetch('http://localhost:5000/ai-assistant', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ 
      action,
      currentDiagram: diagramData 
    })
  });
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏–∞–≥—Ä–∞–º–º—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–∞ –ò–ò
};
–≠–∫—Å–ø–æ—Ä—Ç –¥–∏–∞–≥—Ä–∞–º–º:

–î–æ–±–∞–≤—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –≤ PNG/SVG

–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å:

–§—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ React/Typescript

–ë—ç–∫–µ–Ω–¥–æ–º –Ω–∞ Python/Flask

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π ML-–º–æ–¥–µ–ª–µ–π

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π C4-–¥–∏–∞–≥—Ä–∞–º–º

–ì–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞ –¥–∏–∞–≥—Ä–∞–º–º

–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º

–î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –º–æ–∂–Ω–æ:

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É–∑–ª–æ–≤

–î–æ–±–∞–≤–∏—Ç—å –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –¥–∏–∞–≥—Ä–∞–º–º

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è (Google Drive, Dropbox)

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (PlantUML, Mermaid)

–≤—Å–µ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∏ —Ñ–æ—Ä–Ω—Ç –∏ –±—ç–∫, –Ω–æ –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è (–ø–æ—Å–ª–µ –æ—Ç—Ä–∞–≤–∫–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ—Å–∏—Ö–æ–¥–∏—Ç) + –Ω—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (PlantUML) –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–ø—Ä–∞–≤–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–º –∏–∑–º–µ–Ω–∏–µ–º –¥–∏–∞–≥—Ä–∞–º–º—ã. –°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ –Ω–∞ —á–µ–º –Ω—É–∂–Ω–æ —Å–µ–π—á–∞—Å —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—Å—è —ç—Ç–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Ö —Ä–∞–±–æ—Ç—ã (–∏–Ω—Ñ–µ—Ä–µ–Ω—Å –∏ –ø–∞–π–ø–ª–∞–π–Ω –∑–∞–≥—Ä—É–∑–∫—É) -- –≤–æ—Ç —Ç–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –∏–º–µ—é—Ç—Å—è: NER-–ú–æ–¥–µ–ª—å (–æ–±—É—á–µ–Ω–∞), —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ (backend/ner_model-20250625T131736Z-1-001/ner_model):
config.json
model.safetensors
special_tokens_map.json
tokenizer.json
tokenizer_config.json
vocab.txt

RE-–ú–æ–¥–µ–ª—å (–æ–±—É—á–µ–Ω–∞), —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–∫–∏ (backend/re_model_v2-20250625T151402Z-1-001/re_model_v2l):
added_tokens.json
config.json
model.safetensors
special_tokens_map.json
tokenizer.json
tokenizer_config.json
vocab.txt
–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ —Ä–µ—à–∏–º –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º –≤–∞—à–∏ –æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏. –Ø —Ä–∞–∑–¥–µ–ª—é –∑–∞–¥–∞—á—É –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏: 1) –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ 2) –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∞—à–∏—Ö ML-–º–æ–¥–µ–ª–µ–π —Å —Ñ—É–Ω–∫—Ü–∏–µ–π —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.

–ß–∞—Å—Ç—å 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã
–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¥–∏–∞–≥—Ä–∞–º–º–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º —ç—Ç–æ:

src/App.tsx (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è handleCreateDiagram):

tsx
const handleCreateDiagram = async (requirements: string) => {
  setIsProcessing(true);
  setError(null);
  
  try {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ –±—ç–∫–µ–Ω–¥—É
    const response = await fetch('http://localhost:5000/process', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ text: requirements }),
    });
    
    if (!response.ok) {
      throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞');
    }
    
    const data = await response.json();
    console.log("Backend response:", data); // –õ–æ–≥–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    
    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã
    const nodes = data.entities.map((entity: Entity, index: number) => ({
      id: `node-${index}`,
      position: { x: 100 + index * 200, y: 100 },
      data: { 
        label: entity.text,
        entityType: entity.type
      },
      type: 'custom' // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø —É–∑–ª–∞
    }));
    
    const edges = data.relations.map((relation: Relation, index: number) => {
      const sourceIndex = data.entities.findIndex((e: Entity) => e.text === relation.head);
      const targetIndex = data.entities.findIndex((e: Entity) => e.text === relation.tail);
      
      return {
        id: `edge-${index}`,
        source: `node-${sourceIndex}`,
        target: `node-${targetIndex}`,
        label: relation.type,
        animated: true // –ê–Ω–∏–º–∏—Ä—É–µ–º —Å–≤—è–∑–∏
      };
    });
    
    setDiagramData({ nodes, edges });
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º—ã
    generateC4Code(data.entities, data.relations);
    
  } catch (err) {
    setError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
    console.error(err);
  } finally {
    setIsProcessing(false);
  }
};
–ß–∞—Å—Ç—å 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ML-–º–æ–¥–µ–ª–µ–π –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
backend/app.py (–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –≤–∞—à–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏):

python
from flask import Flask, request, jsonify
from flask_cors import CORS
import numpy as np
from transformers import AutoTokenizer, AutoModelForTokenClassification, pipeline
from transformers import AutoModelForSequenceClassification
import torch
import re

app = Flask(__name__)
CORS(app)

# –ó–∞–≥—Ä—É–∑–∫–∞ NER –º–æ–¥–µ–ª–∏
ner_model_path = "ner_model-20250625T131736Z-1-001/ner_model"
ner_tokenizer = AutoTokenizer.from_pretrained(ner_model_path)
ner_model = AutoModelForTokenClassification.from_pretrained(ner_model_path)
ner_pipeline = pipeline(
    "token-classification", 
    model=ner_model, 
    tokenizer=ner_tokenizer,
    aggregation_strategy="simple"
)

# –ó–∞–≥—Ä—É–∑–∫–∞ RE –º–æ–¥–µ–ª–∏
re_model_path = "re_model_v2-20250625T151402Z-1-001/re_model_v2"
re_tokenizer = AutoTokenizer.from_pretrained(re_model_path)
re_model = AutoModelForSequenceClassification.from_pretrained(re_model_path)

# –°–ø–∏—Å–∫–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
ENTITY_TYPES = ["SYSTEM", "CONTAINER", "COMPONENT", "ACTOR", "EXTERNAL_SYSTEM", "DATABASE", "QUEUE", "VERB"]
RELATION_TYPES = ["uses", "contains", "stores_in", "produces", "retrieves_from", 
                 "triggers", "monitors", "delivers_to", "depends_on", "communicates_with", "interacts_with"]

def predict_entities(text):
    """–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π —Å –ø–æ–º–æ—â—å—é NER –º–æ–¥–µ–ª–∏"""
    results = ner_pipeline(text)
    
    entities = []
    for entity in results:
        # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π
        if entity['entity_group'] in ENTITY_TYPES and entity['word'].strip():
            # –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
            if entities and entities[-1]['end'] == entity['start'] and entities[-1]['type'] == entity['entity_group']:
                entities[-1]['text'] += entity['word']
                entities[-1]['end'] = entity['end']
            else:
                entities.append({
                    "text": entity['word'],
                    "type": entity['entity_group'],
                    "start": entity['start'],
                    "end": entity['end']
                })
    
    return entities

def predict_relations(entities, text):
    """–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é RE –º–æ–¥–µ–ª–∏"""
    relations = []
    
    if len(entities) < 2:
        return relations
    
    # –°–æ–∑–¥–∞–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–∞—Ä—ã —Å—É—â–Ω–æ—Å—Ç–µ–π
    for i in range(len(entities)):
        for j in range(i + 1, len(entities)):
            head = entities[i]
            tail = entities[j]
            
            # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
            context = f"{head['text']} and {tail['text']} in context: {text}"
            inputs = re_tokenizer(
                context, 
                return_tensors="pt", 
                truncation=True, 
                max_length=512
            )
            
            # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
            outputs = re_model(**inputs)
            logits = outputs.logits
            predicted_class = torch.argmax(logits, dim=1).item()
            
            if predicted_class < len(RELATION_TYPES):
                relation_type = RELATION_TYPES[predicted_class]
                relations.append({
                    "head": head['text'],
                    "tail": tail['text'],
                    "type": relation_type
                })
    
    return relations

@app.route('/process', methods=['POST'])
def process_text():
    data = request.json
    text = data.get('text', '')
    
    # –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º —Å—É—â–Ω–æ—Å—Ç–∏
    entities = predict_entities(text)
    print("Predicted entities:", entities)
    
    # –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è
    relations = predict_relations(entities, text)
    print("Predicted relations:", relations)
    
    return jsonify({
        "entities": entities,
        "relations": relations
    })

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)
–ß–∞—Å—Ç—å 3: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
src/components/CodePanel/CodePanel.tsx (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π):

tsx
import React, { useState, useEffect } from 'react';
import Editor from '@monaco-editor/react';
import { Box, Typography, Button } from '@mui/material';
import './CodePanel.css';
import { motion } from 'framer-motion';

interface CodePanelProps {
  code: string;
  onCodeChange?: (newCode: string) => void;
  onApply?: (code: string) => void;
}

const CodePanel: React.FC<CodePanelProps> = ({ 
  code, 
  onCodeChange,
  onApply 
}) => {
  const [editorLoaded, setEditorLoaded] = useState(false);
  const [currentCode, setCurrentCode] = useState(code);
  const [isModified, setIsModified] = useState(false);

  useEffect(() => {
    setCurrentCode(code);
    setIsModified(false);
  }, [code]);

  const handleEditorChange = (value: string | undefined) => {
    if (value !== undefined) {
      setCurrentCode(value);
      setIsModified(true);
      if (onCodeChange) {
        onCodeChange(value);
      }
    }
  };

  const handleApply = () => {
    if (onApply && isModified) {
      onApply(currentCode);
      setIsModified(false);
    }
  };

  return (
    <Box className="code-panel">
      <Box sx={{ 
        display: 'flex', 
        justifyContent: 'space-between', 
        alignItems: 'center',
        p: 2, 
        borderBottom: '1px solid #333',
        backgroundColor: '#1e1e1e'
      }}>
        <Typography variant="h6">
          Diagram Code
        </Typography>
        <Button
          variant="contained"
          color="primary"
          size="small"
          disabled={!isModified}
          onClick={handleApply}
        >
          Apply Changes
        </Button>
      </Box>
      
      <motion.div 
        className="editor-container"
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 0.5 }}
      >
        {!editorLoaded && (
          <Box sx={{ 
            height: '100%', 
            display: 'flex', 
            justifyContent: 'center', 
            alignItems: 'center',
            backgroundColor: '#1e1e1e'
          }}>
            <Typography>Loading code editor...</Typography>
          </Box>
        )}
        
        <Editor
          height="100%"
          language="c4"
          value={currentCode}
          theme="vs-dark"
          options={{
            minimap: { enabled: true },
            fontSize: 14,
            scrollBeyondLastLine: false,
            automaticLayout: true,
          }}
          onChange={handleEditorChange}
          onMount={() => setEditorLoaded(true)}
        />
      </motion.div>
    </Box>
  );
};

export default CodePanel;
src/App.tsx (–¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞):

tsx
// –î–æ–±–∞–≤–ª—è–µ–º –≤ App –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
const handleCodeChange = (newCode: string) => {
  // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–¥–∞ –∑–¥–µ—Å—å
  console.log("Code changed:", newCode);
};

const handleApplyCode = (code: string) => {
  // –ü–∞—Ä—Å–∏–Ω–≥ PlantUML –∫–æ–¥–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
  // –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–µ—Ä
  console.log("Applying code changes:", code);
  
  // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏–º –∫–æ–¥
  setGeneratedCode(code);
  
  // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–¥–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ –¥–∏–∞–≥—Ä–∞–º–º—É
  // const { nodes, edges } = parsePlantUML(code);
  // setDiagramData({ nodes, edges });
};

// –í —Ä–µ–Ω–¥–µ—Ä–µ CodePanel:
<CodePanel 
  code={generatedCode} 
  onCodeChange={handleCodeChange}
  onApply={handleApplyCode}
/>
–ß–∞—Å—Ç—å 4: –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –±—ç–∫–µ–Ω–¥–∞:

bash
pip install transformers torch flask flask-cors
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥:

bash
cd backend
python app.py
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:

bash
cd frontend
npm run dev
–ß–∞—Å—Ç—å 5: –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
–ü–∞—Ä—Å–∏–Ω–≥ PlantUML:

python
# –î–æ–±–∞–≤—å—Ç–µ –≤ backend/app.py —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
@app.route('/parse-plantuml', methods=['POST'])
def parse_plantuml():
    data = request.json
    code = data.get('code', '')
    
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ PlantUML -> JSON –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã
    # –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é
    nodes = []
    edges = []
    
    # –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞:
    lines = code.split('\n')
    for line in lines:
        if line.startswith('System('):
            match = re.match(r'System\((\w+),\s*"([^"]+)",\s*"([^"]*)"\)', line)
            if match:
                nodes.append({
                    'id': match.group(1),
                    'label': match.group(2),
                    'entityType': 'SYSTEM'
                })
        elif line.startswith('Rel('):
            match = re.match(r'Rel\((\w+),\s*(\w+),\s*"([^"]*)"\)', line)
            if match:
                edges.append({
                    'source': match.group(1),
                    'target': match.group(2),
                    'label': match.group(3)
                })
    
    return jsonify({
        "nodes": nodes,
        "edges": edges
    })
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:

tsx
const handleApplyCode = async (code: string) => {
  try {
    const response = await fetch('http://localhost:5000/parse-plantuml', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ code }),
    });
    
    if (!response.ok) {
      throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –∫–æ–¥–∞');
    }
    
    const data = await response.json();
    
    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç ReactFlow
    const nodes = data.nodes.map((node: any, index: number) => ({
      id: node.id,
      position: { x: 100 + index * 200, y: 100 },
      data: { 
        label: node.label,
        entityType: node.entityType
      },
      type: 'custom'
    }));
    
    const edges = data.edges.map((edge: any, index: number) => ({
      id: `edge-${index}`,
      source: edge.source,
      target: edge.target,
      label: edge.label,
      animated: true
    }));
    
    setDiagramData({ nodes, edges });
    setGeneratedCode(code);
    
  } catch (err) {
    setError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–¥. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.');
    console.error(err);
  }
};
–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É–∑–ª–æ–≤:

tsx
// –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —É–∑–ª–æ–≤
const layoutElements = (nodes: any[], edges: any[]) => {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, force-directed)
  // –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É d3-force –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏
  return { nodes: positionedNodes, edges };
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const { nodes: layoutNodes, edges: layoutEdges } = layoutElements(nodes, edges);
setDiagramData({ nodes: layoutNodes, edges: layoutEdges });
–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞:

ML-–º–æ–¥–µ–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

–î–∏–∞–≥—Ä–∞–º–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

–ö–æ–¥ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

–î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤

–≠–∫—Å–ø–æ—Ä—Ç –¥–∏–∞–≥—Ä–∞–º–º (PNG/SVG)

–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ C4

–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω—É—é —Ä–∞–±–æ—Ç—É

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π

–ø–æ—á—Ç–∏ –≤—Å–µ –ø—Ä–∞–≤–∫–∏ –≤–Ω–µ—Å, –Ω–æ –¥–∞–≤–∞–π —Å –º–æ–º–µ–Ω—Ç–∞ "src/App.tsx (–¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞):" –ø–æ–¥—Ä–æ–±–Ω–µ–µ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫—É—Å–∫–∏ –∫–æ–¥–∞. –ó–∞–æ–¥–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏–º —É–ª—É—á—à–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä—ë–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ –∫–æ–¥–∞ –¥–ª—è App.tsx –∏ CodePanel, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–¥–æ–ª–∂–∏–º —É–ª—É—á—à–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é ML-–º–æ–¥–µ–ª–µ–π –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º.

1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π App.tsx
src/App.tsx:

tsx
import React, { useState, useCallback, useEffect } from 'react';
import DiagramEditor from './components/DiagramEditor/DiagramEditor';
import InputPanel from './components/InputPanel/InputPanel';
import CodePanel from './components/CodePanel/CodePanel';
import AIAssistant from './components/AIAssistant/AIAssistant';
import { Box, Paper, Typography, CircularProgress, Snackbar, Alert, IconButton } from '@mui/material';
import { motion } from 'framer-motion';
import SettingsIcon from '@mui/icons-material/Settings';
import RefreshIcon from '@mui/icons-material/Refresh';

// –¢–∏–ø—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
interface Entity {
  text: string;
  type: string;
}

interface Relation {
  head: string;
  tail: string;
  type: string;
}

const App: React.FC = () => {
  const [diagramData, setDiagramData] = useState<any>(null);
  const [generatedCode, setGeneratedCode] = useState<string>('');
  const [isProcessing, setIsProcessing] = useState<boolean>(false);
  const [error, setError] = useState<string | null>(null);
  const [entities, setEntities] = useState<Entity[]>([]);
  const [relations, setRelations] = useState<Relation[]>([]);
  const [history, setHistory] = useState<any[]>([]);
  const [historyIndex, setHistoryIndex] = useState<number>(-1);

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —É–∑–ª–æ–≤
  const layoutElements = useCallback((nodes: any[], edges: any[]) => {
    // –ü—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å d3-force)
    const positionedNodes = nodes.map((node, index) => {
      const row = Math.floor(index / 4);
      const col = index % 4;
      return {
        ...node,
        position: { 
          x: 100 + col * 300, 
          y: 100 + row * 150 
        }
      };
    });
    
    return { nodes: positionedNodes, edges };
  }, []);

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã
  const handleCreateDiagram = async (requirements: string) => {
    setIsProcessing(true);
    setError(null);
    
    try {
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ –±—ç–∫–µ–Ω–¥—É
      const response = await fetch('http://localhost:5000/process', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ text: requirements }),
      });
      
      if (!response.ok) {
        throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞');
      }
      
      const data = await response.json();
      setEntities(data.entities);
      setRelations(data.relations);
      
      // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã
      const nodes = data.entities.map((entity: Entity, index: number) => ({
        id: `node-${index}`,
        position: { x: 0, y: 0 }, // –í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
        data: { 
          label: entity.text,
          entityType: entity.type
        },
        type: 'custom'
      }));
      
      const edges = data.relations.map((relation: Relation, index: number) => {
        const sourceIndex = data.entities.findIndex((e: Entity) => e.text === relation.head);
        const targetIndex = data.entities.findIndex((e: Entity) => e.text === relation.tail);
        
        return {
          id: `edge-${index}`,
          source: `node-${sourceIndex}`,
          target: `node-${targetIndex}`,
          label: relation.type,
          animated: true
        };
      });
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É–∑–ª–æ–≤
      const { nodes: positionedNodes, edges: positionedEdges } = layoutElements(nodes, edges);
      
      setDiagramData({ 
        nodes: positionedNodes, 
        edges: positionedEdges 
      });
      
      // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
      const newHistory = [...history.slice(0, historyIndex + 1), {
        nodes: positionedNodes,
        edges: positionedEdges
      }];
      
      setHistory(newHistory);
      setHistoryIndex(newHistory.length - 1);
      
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º—ã
      generateC4Code(data.entities, data.relations);
      
    } catch (err) {
      setError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
      console.error(err);
    } finally {
      setIsProcessing(false);
    }
  };

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã
  const generateC4Code = useCallback((entities: Entity[], relations: Relation[]) => {
    let code = "// C4 Diagram Code\n";
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π
    entities.forEach((entity) => {
      const cleanId = entity.text.replace(/\s+/g, '_').replace(/[^a-zA-Z0-9_]/g, '');
      code += `${entity.type}(${cleanId}, "${entity.text}", "")\n`;
    });
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–≤—è–∑–∏
    relations.forEach(rel => {
      const headClean = rel.head.replace(/\s+/g, '_').replace(/[^a-zA-Z0-9_]/g, '');
      const tailClean = rel.tail.replace(/\s+/g, '_').replace(/[^a-zA-Z0-9_]/g, '');
      code += `Rel(${headClean}, ${tailClean}, "${rel.type}")\n`;
    });
    
    setGeneratedCode(code);
  }, []);

  // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞
  const handleApplyCode = useCallback(async (code: string) => {
    try {
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥ –Ω–∞ –±—ç–∫–µ–Ω–¥ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
      const response = await fetch('http://localhost:5000/parse-plantuml', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ code }),
      });
      
      if (!response.ok) {
        throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –∫–æ–¥–∞');
      }
      
      const data = await response.json();
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É–∑–ª–æ–≤
      const { nodes: positionedNodes, edges: positionedEdges } = layoutElements(
        data.nodes,
        data.edges
      );
      
      setDiagramData({ 
        nodes: positionedNodes, 
        edges: positionedEdges 
      });
      
      // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
      const newHistory = [...history.slice(0, historyIndex + 1), {
        nodes: positionedNodes,
        edges: positionedEdges
      }];
      
      setHistory(newHistory);
      setHistoryIndex(newHistory.length - 1);
      
      setGeneratedCode(code);
      
    } catch (err) {
      setError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–¥. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.');
      console.error(err);
    }
  }, [history, historyIndex, layoutElements]);

  // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—Ä–∏–∏
  const handleUndo = () => {
    if (historyIndex > 0) {
      const newIndex = historyIndex - 1;
      setHistoryIndex(newIndex);
      setDiagramData(history[newIndex]);
    }
  };

  const handleRedo = () => {
    if (historyIndex < history.length - 1) {
      const newIndex = historyIndex + 1;
      setHistoryIndex(newIndex);
      setDiagramData(history[newIndex]);
    }
  };

  const handleReset = () => {
    setDiagramData(null);
    setGeneratedCode('');
    setEntities([]);
    setRelations([]);
    setHistory([]);
    setHistoryIndex(-1);
  };

  const handleCloseError = () => {
    setError(null);
  };

  return (
    <Box sx={{ 
      height: '100vh', 
      display: 'flex', 
      flexDirection: 'column', 
      bgcolor: 'background.default' 
    }}>
      <Snackbar
        open={!!error}
        autoHideDuration={6000}
        onClose={handleCloseError}
        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}
      >
        <Alert onClose={handleCloseError} severity="error" sx={{ width: '100%' }}>
          {error}
        </Alert>
      </Snackbar>
      
      {/* –®–∞–ø–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */}
      <Box sx={{ 
        p: 2, 
        borderBottom: '1px solid', 
        borderColor: 'divider',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center'
      }}>
        <Typography variant="h4" component="h1" sx={{ fontWeight: 'bold' }}>
          C4 Model Architect
        </Typography>
        
        <Box>
          <IconButton 
            onClick={handleUndo} 
            disabled={historyIndex <= 0}
            title="Undo"
          >
            <RefreshIcon sx={{ transform: 'scaleX(-1)' }} />
          </IconButton>
          
          <IconButton 
            onClick={handleRedo} 
            disabled={historyIndex >= history.length - 1}
            title="Redo"
          >
            <RefreshIcon />
          </IconButton>
          
          <IconButton 
            onClick={handleReset} 
            title="Reset"
          >
            <SettingsIcon />
          </IconButton>
        </Box>
      </Box>
      
      {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}
      <Box sx={{ 
        flex: 1, 
        display: 'flex', 
        overflow: 'hidden',
        gap: '16px',
        p: '8px'
      }}>
        {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –¥–∏–∞–≥—Ä–∞–º–º–∞ */}
        <Box sx={{ 
          flex: 3, 
          height: '100%',
          minWidth: 0,
          position: 'relative'
        }}>
          <Paper sx={{ 
            height: '100%', 
            borderRadius: 2, 
            overflow: 'hidden', 
            position: 'relative' 
          }}>
            <DiagramEditor 
              data={diagramData} 
              onNodesChange={setDiagramData}
            />
          </Paper>
          
          {isProcessing && (
            <Box sx={{
              position: 'absolute',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              backgroundColor: 'rgba(0, 0, 0, 0.5)',
              zIndex: 1000
            }}>
              <CircularProgress size={60} />
              <Typography variant="h6" sx={{ ml: 2, color: 'white' }}>
                Processing with ML...
              </Typography>
            </Box>
          )}
        </Box>
        
        {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –∫–æ–¥ –∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç */}
        <Box sx={{ 
          flex: 1, 
          display: 'flex', 
          flexDirection: 'column', 
          height: '100%',
          minWidth: 0,
          gap: '16px'
        }}>
          <Paper sx={{ 
            flex: 1, 
            borderRadius: 2, 
            overflow: 'hidden',
            minHeight: 0
          }}>
            <CodePanel 
              code={generatedCode} 
              onApply={handleApplyCode}
            />
          </Paper>
          
          <Paper sx={{ 
            borderRadius: 2, 
            overflow: 'hidden',
            flexShrink: 0,
            height: '30%'
          }}>
            <AIAssistant 
              onAction={(action) => console.log('AI action:', action)}
            />
          </Paper>
        </Box>
      </Box>
      
      <motion.div
        initial={{ y: 100 }}
        animate={{ y: 0 }}
        transition={{ type: 'spring', damping: 25 }}
      >
        <InputPanel onCreate={handleCreateDiagram} isLoading={isProcessing} />
      </motion.div>
    </Box>
  );
};

export default App;
2. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π DiagramEditor —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
src/components/DiagramEditor/DiagramEditor.tsx:

tsx
import React, { useCallback, useState } from 'react';
import ReactFlow, { 
  Controls, 
  Background, 
  MiniMap,
  ReactFlowProvider,
  Node,
  Edge,
  NodeChange,
  EdgeChange,
  applyNodeChanges,
  applyEdgeChanges
} from 'reactflow';
import 'reactflow/dist/style.css';
import './DiagramEditor.css';
import { motion } from 'framer-motion';
import CustomNode from './CustomNode';

const nodeTypes = {
  custom: CustomNode,
};

interface DiagramEditorProps {
  data: any;
  onNodesChange?: (data: any) => void;
}

const DiagramEditor: React.FC<DiagramEditorProps> = ({ data, onNodesChange }) => {
  const [nodes, setNodes] = useState<Node[]>([]);
  const [edges, setEdges] = useState<Edge[]>([]);

  // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  React.useEffect(() => {
    if (data) {
      setNodes(data.nodes || []);
      setEdges(data.edges || []);
    } else {
      setNodes([]);
      setEdges([]);
    }
  }, [data]);

  const onNodesChangeHandler = useCallback(
    (changes: NodeChange[]) => {
      setNodes((nds) => applyNodeChanges(changes, nds));
      
      // –ï—Å–ª–∏ –µ—Å—Ç—å –≤–Ω–µ—à–Ω–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –≤—ã–∑—ã–≤–∞–µ–º –µ–≥–æ
      if (onNodesChange) {
        const updatedNodes = applyNodeChanges(changes, nodes);
        onNodesChange({ nodes: updatedNodes, edges });
      }
    },
    [onNodesChange, nodes, edges]
  );

  const onEdgesChangeHandler = useCallback(
    (changes: EdgeChange[]) => {
      setEdges((eds) => applyEdgeChanges(changes, eds));
    },
    []
  );

  const onNodeClick = useCallback((_: React.MouseEvent, node: Node) => {
    console.log('Node clicked:', node);
  }, []);

  if (!data) {
    return (
      <div className="diagram-placeholder">
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          className="placeholder-content"
        >
          <div className="animation-container">
            <div className="circle circle-1"></div>
            <div className="circle circle-2"></div>
            <div className="circle circle-3"></div>
          </div>
          <h3>Enter requirements to generate C4 diagram</h3>
          <p>Start by describing your system in the input panel below</p>
        </motion.div>
      </div>
    );
  }

  return (
    <ReactFlowProvider>
      <ReactFlow
        nodes={nodes}
        edges={edges}
        onNodesChange={onNodesChangeHandler}
        onEdgesChange={onEdgesChangeHandler}
        onNodeClick={onNodeClick}
        nodeTypes={nodeTypes}
        fitView
      >
        <Background color="#5f5f5f" gap={16} />
        <Controls />
        <MiniMap />
      </ReactFlow>
    </ReactFlowProvider>
  );
};

export default DiagramEditor;
3. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π CodePanel —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏
src/components/CodePanel/CodePanel.tsx:

tsx
import React, { useState, useEffect } from 'react';
import Editor from '@monaco-editor/react';
import { Box, Typography, Button } from '@mui/material';
import './CodePanel.css';
import { motion } from 'framer-motion';

interface CodePanelProps {
  code: string;
  onApply?: (code: string) => void;
}

const CodePanel: React.FC<CodePanelProps> = ({ 
  code, 
  onApply 
}) => {
  const [editorLoaded, setEditorLoaded] = useState(false);
  const [currentCode, setCurrentCode] = useState(code);
  const [isModified, setIsModified] = useState(false);
  const [isValid, setIsValid] = useState(true);

  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Ç–µ–∫—É—â–∏–π –∫–æ–¥ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ –∏–∑–≤–Ω–µ
  useEffect(() => {
    setCurrentCode(code);
    setIsModified(false);
  }, [code]);

  const handleEditorChange = (value: string | undefined) => {
    if (value !== undefined) {
      setCurrentCode(value);
      setIsModified(true);
      
      // –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–∞
      const isValidCode = validatePlantUML(value);
      setIsValid(isValidCode);
    }
  };

  const validatePlantUML = (code: string) => {
    // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
    return code.includes('System') || code.includes('Rel');
  };

  const handleApply = () => {
    if (onApply && isModified && isValid) {
      onApply(currentCode);
      setIsModified(false);
    }
  };

  return (
    <Box className="code-panel">
      <Box sx={{ 
        display: 'flex', 
        justifyContent: 'space-between', 
        alignItems: 'center',
        p: 2, 
        borderBottom: '1px solid #333',
        backgroundColor: '#1e1e1e'
      }}>
        <Typography variant="h6">
          Diagram Code
        </Typography>
        <Button
          variant="contained"
          color={isValid ? "primary" : "error"}
          size="small"
          disabled={!isModified || !isValid}
          onClick={handleApply}
          sx={{
            position: 'relative',
            overflow: 'hidden',
            '&:after': {
              content: '""',
              position: 'absolute',
              top: 0,
              left: 0,
              width: isModified ? '100%' : '0%',
              height: '100%',
              backgroundColor: 'rgba(255, 255, 255, 0.2)',
              transition: 'width 0.3s',
              pointerEvents: 'none'
            }
          }}
        >
          Apply Changes
          {!isValid && (
            <motion.span
              initial={{ scale: 0 }}
              animate={{ scale: 1 }}
              style={{
                position: 'absolute',
                top: -5,
                right: -5,
                backgroundColor: 'red',
                color: 'white',
                borderRadius: '50%',
                width: 20,
                height: 20,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: 12
              }}
            >
              !
            </motion.span>
          )}
        </Button>
      </Box>
      
      <motion.div 
        className="editor-container"
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 0.5 }}
      >
        {!editorLoaded && (
          <Box sx={{ 
            height: '100%', 
            display: 'flex', 
            justifyContent: 'center', 
            alignItems: 'center',
            backgroundColor: '#1e1e1e'
          }}>
            <CircularProgress size={24} />
            <Typography sx={{ ml: 2 }}>Loading editor...</Typography>
          </Box>
        )}
        
        <Editor
          height="100%"
          language="c4"
          value={currentCode}
          theme="vs-dark"
          options={{
            minimap: { enabled: true },
            fontSize: 14,
            scrollBeyondLastLine: false,
            automaticLayout: true,
          }}
          onChange={handleEditorChange}
          onMount={() => setEditorLoaded(true)}
        />
      </motion.div>
    </Box>
  );
};

export default CodePanel;
4. –£–ª—É—á—à–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π ML-–º–æ–¥–µ–ª–µ–π
backend/app.py:

python
from flask import Flask, request, jsonify
from flask_cors import CORS
import numpy as np
from transformers import AutoTokenizer, AutoModelForTokenClassification, pipeline
from transformers import AutoModelForSequenceClassification
import torch
import re
import os
import json

app = Flask(__name__)
CORS(app)

# –ó–∞–≥—Ä—É–∑–∫–∞ NER –º–æ–¥–µ–ª–∏
ner_model_path = "ner_model-20250625T131736Z-1-001/ner_model"
ner_tokenizer = AutoTokenizer.from_pretrained(ner_model_path)
ner_model = AutoModelForTokenClassification.from_pretrained(ner_model_path)

# –ó–∞–≥—Ä—É–∑–∫–∞ RE –º–æ–¥–µ–ª–∏
re_model_path = "re_model_v2-20250625T151402Z-1-001/re_model_v2"
re_tokenizer = AutoTokenizer.from_pretrained(re_model_path)
re_model = AutoModelForSequenceClassification.from_pretrained(re_model_path)

# –°–ø–∏—Å–∫–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
ENTITY_TYPES = ["SYSTEM", "CONTAINER", "COMPONENT", "ACTOR", "EXTERNAL_SYSTEM", "DATABASE", "QUEUE", "VERB"]
RELATION_TYPES = ["uses", "contains", "stores_in", "produces", "retrieves_from", 
                 "triggers", "monitors", "delivers_to", "depends_on", "communicates_with", "interacts_with"]

# –°–æ–∑–¥–∞–µ–º –ø–∞–π–ø–ª–∞–π–Ω—ã
ner_pipeline = pipeline(
    "token-classification", 
    model=ner_model, 
    tokenizer=ner_tokenizer,
    aggregation_strategy="simple"
)

def predict_entities(text):
    """–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π —Å –ø–æ–º–æ—â—å—é NER –º–æ–¥–µ–ª–∏"""
    results = ner_pipeline(text)
    
    entities = []
    for entity in results:
        # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π
        if entity['entity_group'] in ENTITY_TYPES and entity['word'].strip():
            # –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
            if entities and entities[-1]['end'] == entity['start'] and entities[-1]['type'] == entity['entity_group']:
                entities[-1]['text'] += " " + entity['word'].strip()
                entities[-1]['end'] = entity['end']
            else:
                entities.append({
                    "text": entity['word'].strip(),
                    "type": entity['entity_group'],
                    "start": entity['start'],
                    "end": entity['end']
                })
    
    return entities

def predict_relations(entities, text):
    """–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é RE –º–æ–¥–µ–ª–∏"""
    relations = []
    
    if len(entities) < 2:
        return relations
    
    # –°–æ–∑–¥–∞–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–∞—Ä—ã —Å—É—â–Ω–æ—Å—Ç–µ–π
    for i in range(len(entities)):
        for j in range(i + 1, len(entities)):
            head = entities[i]
            tail = entities[j]
            
            # –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
            context = f"{head['text']} {tail['text']} in: {text}"
            inputs = re_tokenizer(
                context, 
                return_tensors="pt", 
                padding=True,
                truncation=True, 
                max_length=128
            )
            
            # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
            outputs = re_model(**inputs)
            logits = outputs.logits
            probabilities = torch.softmax(logits, dim=1)
            confidence, predicted_class = torch.max(probabilities, dim=1)
            
            # –ü—Ä–∏–Ω–∏–º–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
            if confidence.item() > 0.7 and predicted_class.item() < len(RELATION_TYPES):
                relation_type = RELATION_TYPES[predicted_class.item()]
                relations.append({
                    "head": head['text'],
                    "tail": tail['text'],
                    "type": relation_type,
                    "confidence": confidence.item()
                })
    
    return relations

@app.route('/process', methods=['POST'])
def process_text():
    data = request.json
    text = data.get('text', '')
    
    # –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º —Å—É—â–Ω–æ—Å—Ç–∏
    entities = predict_entities(text)
    print("Predicted entities:", json.dumps(entities, indent=2, ensure_ascii=False))
    
    # –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è
    relations = predict_relations(entities, text)
    print("Predicted relations:", json.dumps(relations, indent=2, ensure_ascii=False))
    
    return jsonify({
        "entities": entities,
        "relations": relations
    })

@app.route('/parse-plantuml', methods=['POST'])
def parse_plantuml():
    data = request.json
    code = data.get('code', '')
    
    nodes = []
    edges = []
    entities = []
    
    # –†–∞–∑–±–∏–≤–∞–µ–º –∫–æ–¥ –Ω–∞ —Å—Ç—Ä–æ–∫–∏
    lines = code.split('\n')
    
    # –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    entity_pattern = re.compile(r'(\w+)\((\w+),\s*"([^"]+)"(?:,\s*"([^"]*)")?\)')
    relation_pattern = re.compile(r'Rel\(\s*(\w+)\s*,\s*(\w+)\s*,\s*"([^"]*)"\s*\)')
    
    entity_map = {}
    
    for line in lines:
        line = line.strip()
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
        if line.startswith('//') or not line:
            continue
            
        # –ü–∞—Ä—Å–∏–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π
        entity_match = entity_pattern.match(line)
        if entity_match:
            entity_type = entity_match.group(1)
            entity_id = entity_match.group(2)
            entity_name = entity_match.group(3)
            entity_desc = entity_match.group(4) or ""
            
            entity_map[entity_id] = {
                "id": entity_id,
                "name": entity_name,
                "type": entity_type
            }
            
            entities.append({
                "text": entity_name,
                "type": entity_type
            })
            continue
            
        # –ü–∞—Ä—Å–∏–º —Å–≤—è–∑–∏ Rel
        rel_match = relation_pattern.match(line)
        if rel_match:
            source_id = rel_match.group(1)
            target_id = rel_match.group(2)
            relation_type = rel_match.group(3)
            
            if source_id in entity_map and target_id in entity_map:
                edges.append({
                    "source": source_id,
                    "target": target_id,
                    "label": relation_type
                })
    
    # –°–æ–∑–¥–∞–µ–º —É–∑–ª—ã –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã
    nodes = [{
        "id": entity_id,
        "label": entity["name"],
        "entityType": entity["type"]
    } for entity_id, entity in entity_map.items()]
    
    return jsonify({
        "nodes": nodes,
        "edges": edges,
        "entities": entities
    })

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)
5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
a) –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —É–∑–ª–æ–≤
–î–æ–±–∞–≤–∏–º –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —É–∑–ª–æ–≤:

src/utils/layout.ts:

ts
import { Node, Edge } from 'reactflow';

export const layoutElements = (nodes: Node[], edges: Edge[]) => {
  // –ü—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ –≤–∏–¥–µ —Å–µ—Ç–∫–∏
  const GRID_COLS = 4;
  const NODE_WIDTH = 250;
  const NODE_HEIGHT = 150;
  const HORIZONTAL_SPACING = 100;
  const VERTICAL_SPACING = 80;
  
  const positionedNodes = nodes.map((node, index) => {
    const row = Math.floor(index / GRID_COLS);
    const col = index % GRID_COLS;
    
    return {
      ...node,
      position: { 
        x: col * (NODE_WIDTH + HORIZONTAL_SPACING) + 50, 
        y: row * (NODE_HEIGHT + VERTICAL_SPACING) + 50 
      },
      style: {
        width: NODE_WIDTH,
        height: NODE_HEIGHT
      }
    };
  });
  
  return { 
    nodes: positionedNodes, 
    edges: edges.map(edge => ({
      ...edge,
      animated: true
    })) 
  };
};
b) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º
src/components/AIAssistant/AIAssistant.tsx:

tsx
// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

interface AIAssistantProps {
  onAction: (action: string) => void;
}

const AIAssistant: React.FC<AIAssistantProps> = ({ onAction }) => {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
  
  const handleSend = () => {
    if (input.trim()) {
      // Add user message
      setMessages([...messages, { text: input, isUser: true }]);
      
      // Send action to parent
      onAction(input);
      
      setInput('');
    }
  };
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
};
src/App.tsx (–¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–µ–π—Å—Ç–≤–∏–π –ò–ò):

tsx
// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

const handleAIAction = async (action: string) => {
  try {
    const response = await fetch('http://localhost:5000/ai-assistant', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ 
        action,
        currentDiagram: diagramData,
        currentCode: generatedCode
      }),
    });
    
    if (!response.ok) {
      throw new Error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –ò–ò');
    }
    
    const data = await response.json();
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —É–∑–ª–æ–≤
    const { nodes: positionedNodes, edges: positionedEdges } = layoutElements(
      data.nodes,
      data.edges
    );
    
    setDiagramData({ 
      nodes: positionedNodes, 
      edges: positionedEdges 
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥
    setGeneratedCode(data.code || generatedCode);
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ò–ò
    setAIMessages(prev => [
      ...prev, 
      { 
        text: data.response || "I've updated the diagram based on your request.", 
        isUser: false 
      }
    ]);
    
  } catch (err) {
    setError('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ò–ò');
    console.error(err);
  }
};

// –í —Ä–µ–Ω–¥–µ—Ä–µ:
<AIAssistant onAction={handleAIAction} />
6. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
–ë—ç–∫–µ–Ω–¥:

bash
cd backend
pip install -r requirements.txt
python app.py
–§—Ä–æ–Ω—Ç–µ–Ω–¥:

bash
cd frontend
npm run dev
–ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ML-–º–æ–¥–µ–ª–µ–π:

NER –º–æ–¥–µ–ª—å –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π

RE –º–æ–¥–µ–ª—å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π

–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º:

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ PlantUML

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –¥–∏–∞–≥—Ä–∞–º–º—ã

–ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–∞

–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã/–ø–æ–≤—Ç–æ—Ä–∞ –¥–µ–π—Å—Ç–≤–∏–π

–°–±—Ä–æ—Å –¥–∏–∞–≥—Ä–∞–º–º—ã

–£–ª—É—á—à–µ–Ω–Ω—ã–π UX:

–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏

–ê–Ω–∏–º–∞—Ü–∏–∏

–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–£–ª—É—á—à–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –ø–æ–Ω—è—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

–í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è:

–î–æ–±–∞–≤—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –¥–∏–∞–≥—Ä–∞–º–º –≤ PNG/SVG

–†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã C4

–î–æ–±–∞–≤—å—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤

–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —É–∑–ª–æ–≤

–î–æ–±–∞–≤—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

—Å —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –ø–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ "src/components/AIAssistant/AIAssistant.tsx:", –∏ –µ—â–µ –≤–æ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ VScode: [{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "2322",
	"severity": 8,
	"message": "–¢–∏–ø \"{ onAction: (action: any) => void; }\" –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ç–∏–ø–∞ \"IntrinsicAttributes\".\n  –°–≤–æ–π—Å—Ç–≤–æ \"onAction\" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∏–ø–µ \"IntrinsicAttributes\".",
	"source": "ts",
	"startLineNumber": 355,
	"startColumn": 15,
	"endLineNumber": 355,
	"endColumn": 23
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "7006",
	"severity": 8,
	"message": "–ü–∞—Ä–∞–º–µ—Ç—Ä \"action\" –Ω–µ—è–≤–Ω–æ –∏–º–µ–µ—Ç —Ç–∏–ø \"any\".",
	"source": "ts",
	"startLineNumber": 355,
	"startColumn": 26,
	"endLineNumber": 355,
	"endColumn": 32
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "6133",
	"severity": 4,
	"message": "–°–≤–æ–π—Å—Ç–≤–æ \"useEffect\" –æ–±—ä—è–≤–ª–µ–Ω–æ, –Ω–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ.",
	"source": "ts",
	"startLineNumber": 1,
	"startColumn": 40,
	"endLineNumber": 1,
	"endColumn": 49,
	"tags": [
		1
	]
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "6133",
	"severity": 4,
	"message": "–°–≤–æ–π—Å—Ç–≤–æ \"entities\" –æ–±—ä—è–≤–ª–µ–Ω–æ, –Ω–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ.",
	"source": "ts",
	"startLineNumber": 28,
	"startColumn": 10,
	"endLineNumber": 28,
	"endColumn": 18,
	"tags": [
		1
	]
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/App.tsx",
	"owner": "typescript",
	"code": "6133",
	"severity": 4,
	"message": "–°–≤–æ–π—Å—Ç–≤–æ \"relations\" –æ–±—ä—è–≤–ª–µ–Ω–æ, –Ω–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ.",
	"source": "ts",
	"startLineNumber": 29,
	"startColumn": 10,
	"endLineNumber": 29,
	"endColumn": 19,
	"tags": [
		1
	]
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/src/components/CodePanel/CodePanel.tsx",
	"owner": "typescript",
	"code": "2304",
	"severity": 8,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –∏–º—è \"CircularProgress\".",
	"source": "ts",
	"startLineNumber": 125,
	"startColumn": 14,
	"endLineNumber": 125,
	"endColumn": 30
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/backend/app.py",
	"owner": "pylance",
	"code": {
		"value": "reportMissingImports",
		"target": {
			"$mid": 1,
			"path": "/microsoft/pylance-release/blob/main/docs/diagnostics/reportMissingImports.md",
			"scheme": "https",
			"authority": "github.com"
		}
	},
	"severity": 4,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–º–ø–æ—Ä—Ç \"flask\"",
	"source": "Pylance",
	"startLineNumber": 1,
	"startColumn": 6,
	"endLineNumber": 1,
	"endColumn": 11
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/backend/app.py",
	"owner": "pylance",
	"code": {
		"value": "reportMissingModuleSource",
		"target": {
			"$mid": 1,
			"path": "/microsoft/pylance-release/blob/main/docs/diagnostics/reportMissingModuleSource.md",
			"scheme": "https",
			"authority": "github.com"
		}
	},
	"severity": 4,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–º–ø–æ—Ä—Ç \"flask_cors\" –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞",
	"source": "Pylance",
	"startLineNumber": 2,
	"startColumn": 6,
	"endLineNumber": 2,
	"endColumn": 16
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/backend/app.py",
	"owner": "pylance",
	"code": {
		"value": "reportMissingImports",
		"target": {
			"$mid": 1,
			"path": "/microsoft/pylance-release/blob/main/docs/diagnostics/reportMissingImports.md",
			"scheme": "https",
			"authority": "github.com"
		}
	},
	"severity": 4,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–º–ø–æ—Ä—Ç \"numpy\"",
	"source": "Pylance",
	"startLineNumber": 3,
	"startColumn": 8,
	"endLineNumber": 3,
	"endColumn": 13
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/backend/app.py",
	"owner": "pylance",
	"code": {
		"value": "reportMissingImports",
		"target": {
			"$mid": 1,
			"path": "/microsoft/pylance-release/blob/main/docs/diagnostics/reportMissingImports.md",
			"scheme": "https",
			"authority": "github.com"
		}
	},
	"severity": 4,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–º–ø–æ—Ä—Ç \"transformers\"",
	"source": "Pylance",
	"startLineNumber": 4,
	"startColumn": 6,
	"endLineNumber": 4,
	"endColumn": 18
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/backend/app.py",
	"owner": "pylance",
	"code": {
		"value": "reportMissingImports",
		"target": {
			"$mid": 1,
			"path": "/microsoft/pylance-release/blob/main/docs/diagnostics/reportMissingImports.md",
			"scheme": "https",
			"authority": "github.com"
		}
	},
	"severity": 4,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–º–ø–æ—Ä—Ç \"transformers\"",
	"source": "Pylance",
	"startLineNumber": 5,
	"startColumn": 6,
	"endLineNumber": 5,
	"endColumn": 18
},{
	"resource": "/e:/–°ode/C4Designer/open-webui/backend/app.py",
	"owner": "pylance",
	"code": {
		"value": "reportMissingImports",
		"target": {
			"$mid": 1,
			"path": "/microsoft/pylance-release/blob/main/docs/diagnostics/reportMissingImports.md",
			"scheme": "https",
			"authority": "github.com"
		}
	},
	"severity": 4,
	"message": "–ù–µ —É–¥–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–º–ø–æ—Ä—Ç \"torch\"",
	"source": "Pylance",
	"startLineNumber": 6,
	"startColumn": 8,
	"endLineNumber": 6,
	"endColumn": 13
}]
–î–∞–≤–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä–µ–º –∏ –∏—Å–ø—Ä–∞–≤–∏–º –≤—Å–µ –æ—à–∏–±–∫–∏, –Ω–∞—á–∏–Ω–∞—è —Å AIAssistant.tsx –∏ –∑–∞—Ç–µ–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.

1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π AIAssistant.tsx
src/components/AIAssistant/AIAssistant.tsx:

tsx
import React, { useState, useEffect } from 'react';
import { 
  Box, 
  Typography, 
  TextField, 
  IconButton, 
  List, 
  ListItem, 
  ListItemText,
  Avatar,
  Paper,
  CircularProgress
} from '@mui/material';
import SendIcon from '@mui/icons-material/Send';
import SmartToyIcon from '@mui/icons-material/SmartToy';
import { motion, AnimatePresence } from 'framer-motion';

interface AIAssistantProps {
  onAction: (action: string) => void;
}

interface Message {
  text: string;
  isUser: boolean;
}

const AIAssistant: React.FC<AIAssistantProps> = ({ onAction }) => {
  const [messages, setMessages] = useState<Message[]>([
    { text: "Hello! I'm your AI assistant. How can I help with your diagram?", isUser: false }
  ]);
  const [input, setInput] = useState('');
  const [isProcessing, setIsProcessing] = useState(false);

  const handleSend = () => {
    if (input.trim()) {
      // Add user message
      const userMessage: Message = { text: input, isUser: true };
      setMessages(prev => [...prev, userMessage]);
      
      // Send action to parent component
      onAction(input);
      
      // Show processing indicator
      setIsProcessing(true);
      
      // Clear input
      setInput('');
    }
  };

  // Simulate AI response (in real app this would come from backend)
  useEffect(() => {
    if (isProcessing) {
      const timer = setTimeout(() => {
        setMessages(prev => [
          ...prev, 
          { 
            text: "I've updated the diagram based on your request. The authentication flow now includes JWT tokens and refresh tokens.", 
            isUser: false 
          }
        ]);
        setIsProcessing(false);
      }, 1500);
      
      return () => clearTimeout(timer);
    }
  }, [isProcessing]);

  return (
    <Box className="ai-assistant" sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>
      <Typography variant="h6" sx={{ 
        p: 2, 
        borderBottom: '1px solid #333',
        display: 'flex',
        alignItems: 'center',
        backgroundColor: '#1e1e1e'
      }}>
        <SmartToyIcon sx={{ mr: 1, color: 'primary.main' }} />
        AI Assistant
      </Typography>
      
      <Box sx={{ 
        flex: 1, 
        overflow: 'hidden',
        display: 'flex',
        flexDirection: 'column'
      }}>
        <List sx={{ 
          flex: 1, 
          overflowY: 'auto',
          p: 1,
          backgroundColor: '#121212'
        }}>
          <AnimatePresence>
            {messages.map((msg, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                exit={{ opacity: 0 }}
                transition={{ duration: 0.3 }}
              >
                <ListItem sx={{ 
                  justifyContent: msg.isUser ? 'flex-end' : 'flex-start',
                  alignItems: 'flex-start',
                  mb: 1,
                  px: 0
                }}>
                  {!msg.isUser && (
                    <Avatar sx={{ 
                      bgcolor: 'primary.main', 
                      mr: 1,
                      width: 32,
                      height: 32
                    }}>
                      <SmartToyIcon fontSize="small" />
                    </Avatar>
                  )}
                  <Paper sx={{ 
                    p: 1.5, 
                    maxWidth: '85%',
                    bgcolor: msg.isUser ? 'primary.dark' : 'grey.800',
                    borderRadius: msg.isUser 
                      ? '18px 18px 0 18px' 
                      : '18px 18px 18px 0',
                    boxShadow: '0 2px 8px rgba(0, 0, 0, 0.3)'
                  }}>
                    <ListItemText 
                      primary={msg.text} 
                      sx={{ 
                        color: 'white',
                        '& .MuiListItemText-primary': {
                          fontSize: '0.9rem',
                          lineHeight: 1.4
                        }
                      }} 
                    />
                  </Paper>
                </ListItem>
              </motion.div>
            ))}
            
            {isProcessing && (
              <ListItem sx={{ justifyContent: 'flex-start', alignItems: 'center' }}>
                <Avatar sx={{ 
                  bgcolor: 'primary.main', 
                  mr: 1,
                  width: 32,
                  height: 32
                }}>
                  <SmartToyIcon fontSize="small" />
                </Avatar>
                <Box sx={{ display: 'flex', alignItems: 'center' }}>
                  <CircularProgress size={20} sx={{ mr: 1 }} />
                  <Typography variant="body2" color="textSecondary">
                    Thinking...
                  </Typography>
                </Box>
              </ListItem>
            )}
          </AnimatePresence>
        </List>
        
        <Box sx={{ 
          p: 1, 
          borderTop: '1px solid #333',
          backgroundColor: '#1e1e1e'
        }}>
          <TextField
            fullWidth
            variant="outlined"
            placeholder="Ask AI to modify the diagram..."
            value={input}
            onChange={(e) => setInput(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && !isProcessing && handleSend()}
            size="small"
            disabled={isProcessing}
            sx={{ 
              backgroundColor: '#252526',
              borderRadius: '20px',
              '& .MuiOutlinedInput-root': {
                borderRadius: '20px',
                paddingRight: '8px',
                '& input': {
                  padding: '8px 16px',
                  fontSize: '0.9rem'
                }
              }
            }}
            InputProps={{
              endAdornment: (
                <IconButton 
                  onClick={handleSend}
                  disabled={!input.trim() || isProcessing}
                  size="small"
                  sx={{ color: 'primary.main' }}
                >
                  {isProcessing ? (
                    <CircularProgress size={20} />
                  ) : (
                    <SendIcon />
                  )}
                </IconButton>
              )
            }}
          />
        </Box>
      </Box>
    </Box>
  );
};

export default AIAssistant;
2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
a) App.tsx:
tsx
// 1. –£–¥–∞–ª—è–µ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º–ø–æ—Ä—Ç useEffect
import React, { useState, useCallback } from 'react'; // –£–±—Ä–∞–ª–∏ useEffect

// 2. –£–¥–∞–ª—è–µ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è entities –∏ relations
const App: React.FC = () => {
  // –£–¥–∞–ª—è–µ–º —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
  // const [entities, setEntities] = useState<Entity[]>([]);
  // const [relations, setRelations] = useState<Relation[]>([]);
  
  // 3. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º handleAIAction
  const handleAIAction = useCallback(async (action: string) => { // –î–æ–±–∞–≤–∏–ª–∏ —Ç–∏–ø string
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
  }, [history, historyIndex, layoutElements]);
  
  // 4. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–¥–∞—á—É –ø—Ä–æ–ø—Å–æ–≤ –≤ AIAssistant
  return (
    // ...
    <AIAssistant onAction={handleAIAction} />
    // ...
  );
};
b) CodePanel.tsx:
tsx
// –î–æ–±–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç CircularProgress
import { Box, Typography, Button, CircularProgress } from '@mui/material'; // –î–æ–±–∞–≤–∏–ª–∏ CircularProgress

const CodePanel: React.FC<CodePanelProps> = ({ 
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
}) => {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
  
  return (
    // ...
    {!editorLoaded && (
      <Box sx={{ /* ... */ }}>
        <CircularProgress size={24} /> {/* –¢–µ–ø–µ—Ä—å —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç */}
        <Typography sx={{ ml: 2 }}>Loading editor...</Typography>
      </Box>
    )}
    // ...
  );
};
c) –ë—ç–∫–µ–Ω–¥–Ω—ã–µ –æ—à–∏–±–∫–∏ (backend/app.py):
–≠—Ç–∏ –æ—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è Python. –†–µ—à–µ–Ω–∏—è:

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

bash
# –î–ª—è Windows:
backend\venv\Scripts\activate
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

bash
pip install flask flask-cors numpy transformers torch
–í VS Code:

–ù–∞–∂–º–∏—Ç–µ Ctrl+Shift+P

–í—ã–±–µ—Ä–∏—Ç–µ "Python: Select Interpreter"

–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –∏–∑ –ø–∞–ø–∫–∏ backend\venv\Scripts\python.exe

–ï—Å–ª–∏ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –¥–æ–±–∞–≤—å—Ç–µ –≤ settings.json:

json
{
  "python.analysis.extraPaths": ["./backend"],
  "python.analysis.diagnosticSeverityOverrides": {
    "reportMissingImports": "none"
  }
}
3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è AIAssistant
–î–æ–±–∞–≤–∏–º –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

src/components/AIAssistant/AIAssistant.tsx (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è):

tsx
// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

// –î–æ–±–∞–≤–∏–º —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
const predefinedActions = [
  "Add load balancer",
  "Simplify architecture",
  "Add security layer",
  "Optimize database access",
  "Add caching mechanism"
];

const AIAssistant: React.FC<AIAssistantProps> = ({ onAction }) => {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
  
  // –î–æ–±–∞–≤–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
  const [suggestions, setSuggestions] = useState<string[]>(predefinedActions);

  const handleSuggestionClick = (suggestion: string) => {
    setInput(suggestion);
  };

  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
  
  return (
    <Box className="ai-assistant" sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>
      {/* ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ... */}
      
      <Box sx={{ 
        flex: 1, 
        overflow: 'hidden',
        display: 'flex',
        flexDirection: 'column'
      }}>
        {/* –î–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ */}
        {messages.length <= 1 && (
          <Box sx={{ p: 2, borderBottom: '1px solid #333' }}>
            <Typography variant="subtitle2" sx={{ mb: 1, color: '#aaa' }}>
              Try asking:
            </Typography>
            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>
              {suggestions.map((suggestion, index) => (
                <motion.div
                  key={index}
                  whileHover={{ scale: 1.03 }}
                  whileTap={{ scale: 0.98 }}
                >
                  <Button
                    variant="outlined"
                    size="small"
                    onClick={() => handleSuggestionClick(suggestion)}
                    sx={{
                      textTransform: 'none',
                      fontSize: '0.8rem',
                      borderRadius: '12px',
                      color: '#ddd',
                      borderColor: '#444'
                    }}
                  >
                    {suggestion}
                  </Button>
                </motion.div>
              ))}
            </Box>
          </Box>
        )}
        
        {/* ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ... */}
      </Box>
    </Box>
  );
};

export default AIAssistant;
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º –¥–ª—è AIAssistant
backend/app.py (–¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç):

python
# ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

@app.route('/ai-assistant', methods=['POST'])
def ai_assistant():
    data = request.json
    action = data.get('action', '')
    current_diagram = data.get('currentDiagram', {})
    current_code = data.get('currentCode', '')
    
    print(f"AI Assistant request: {action}")
    
    # –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–ò
    # –ü–æ–∫–∞ –≤–µ—Ä–Ω–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–≤–µ—Ç
    
    response_text = f"I've processed your request: '{action}'. The diagram has been updated accordingly."
    
    # –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    new_nodes = current_diagram.get('nodes', [])
    new_edges = current_diagram.get('edges', [])
    
    if "add" in action.lower():
        new_node_id = f"node-{len(new_nodes)}"
        new_nodes.append({
            "id": new_node_id,
            "position": {"x": 500, "y": 300},
            "data": {
                "label": "New Component",
                "entityType": "COMPONENT"
            },
            "type": "custom"
        })
        
        if new_nodes:
            new_edges.append({
                "id": f"edge-{len(new_edges)}",
                "source": new_nodes[0]['id'],
                "target": new_node_id,
                "label": "uses",
                "animated": True
            })
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å)
    new_code = current_code + f"\n// AI Action: {action}"
    
    return jsonify({
        "response": response_text,
        "nodes": new_nodes,
        "edges": new_edges,
        "code": new_code
    })

# ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
src/App.tsx (–æ–±–Ω–æ–≤–ª—è–µ–º handleAIAction):

tsx
const handleAIAction = useCallback(async (action: string) => {
  try {
    setIsProcessing(true);
    
    const response = await fetch('http://localhost:5000/ai-assistant', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ 
        action,
        currentDiagram: diagramData,
        currentCode: generatedCode
      }),
    });
    
    if (!response.ok) {
      throw new Error('Failed to process AI request');
    }
    
    const data = await response.json();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏–∞–≥—Ä–∞–º–º—É
    if (data.nodes && data.edges) {
      const { nodes: positionedNodes, edges: positionedEdges } = layoutElements(
        data.nodes,
        data.edges
      );
      
      setDiagramData({ 
        nodes: positionedNodes, 
        edges: positionedEdges 
      });
      
      // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
      const newHistory = [...history.slice(0, historyIndex + 1), {
        nodes: positionedNodes,
        edges: positionedEdges
      }];
      
      setHistory(newHistory);
      setHistoryIndex(newHistory.length - 1);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥
    if (data.code) {
      setGeneratedCode(data.code);
    }
    
  } catch (err) {
    setError('Failed to process AI request');
    console.error(err);
  } finally {
    setIsProcessing(false);
  }
}, [history, historyIndex, layoutElements, diagramData, generatedCode]);
5. –§–∏–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫. –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π AI Assistant:

–ê–Ω–∏–º–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏

–ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º

–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ TypeScript:

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –ø—Ä–æ–ø—Å–æ–≤

–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤

–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Snackbar

–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã/–ø–æ–≤—Ç–æ—Ä–∞

–°–±—Ä–æ—Å –¥–∏–∞–≥—Ä–∞–º–º—ã

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞:

–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–∞

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–ª—è –∑–∞–ø—É—Å–∫–∞:

–ë—ç–∫–µ–Ω–¥:

bash
cd backend
python app.py
–§—Ä–æ–Ω—Ç–µ–Ω–¥:

bash
cd frontend
npm run dev
–¢–µ–ø–µ—Ä—å –≤–∞—à AI Assistant –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –±—ç–∫–µ–Ω–¥–æ–º, –∞ –≤—Å–µ –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é –∏ —É–ª—É—á—à–µ–Ω–∏—é!
